class Account{static register(){const e=new FormData,a=document.getElementById("email-input").value;e.append("email",a),$.ajax({url:"https://yapms.org/auth/register.php",type:"POST",data:e,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){console.log("Register: "+e);e=e.split(" "),document.getElementById("register-info");closeAllPopups(),"good"===e[0]?displayNotification("Account Registered","Please check your email, and click the verification link. (check your spam)"):"inuse"===e[1]?displayNotification("Register Error","Account Already Registered"):"inactive"===e[1]?displayNotification("Register Error","Verification Email Already Sent (check your spam)"):"resent"===e[1]?displayNotification("Account Registered","Please check your email, and click the verification link. (check your spam)"):"invalid_email"===e[1]&&displayNotification("Register Error",a+" is not a valid email")},error:function(e,a,t){console.log(e),console.log(a),console.log(t),document.getElementById("register-info").innerHTML="Connection Error"}})}static login(){const e=new FormData;var a=document.getElementById("email-login").value,t=document.getElementById("password-login").value;e.append("email",a),e.append("password",t),$.ajax({url:"https://yapms.org/auth/login.php",type:"POST",data:e,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){console.log("Login: "+e);var a=e.split(" ");Account.verifyState(),document.getElementById("password-login").value="";e=document.getElementById("login-info");"good"===a[0]?(e.innerHTML="Please enter your credentials",closeAllPopups()):"bad"===a[0]&&("account_innactive"===a[1]?e.innerHTML="Inactive Account":"incorrect_login"===a[1]&&(e.innerHTML="Incorrect Login"))},error:function(e,a,t){console.log(e),console.log(a),console.log(t),document.getElementById("login-info").innerHTML="Connection Error"}})}static verifyState(){const e=new FormData;e.append("email",Account.email),$.ajax({url:"https://yapms.org/auth/verify_login.php",type:"POST",data:e,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){console.log("Verify Login: "+e);e=e.split(" ");Account.isLoggedIn="good"===e[0],Account.isLoggedIn?(Account.email=e[1],Account.id=e[2]):(Account.id=null,Account.email=null),Account.updateHTML()},error:function(e,a,t){console.log("Account: Could not login")}})}static logout(){closeAllPopups(),$.ajax({url:"https://yapms.org/auth/logout.php",type:"POST",processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){console.log("Logout: "+e),Account.verifyState()},error:function(e,a,t){console.log(e),console.log(a),console.log(t)}})}static unlink(e){var a=new FormData;a.append("mapName",e),$.ajax({url:"https://yapms.org/users/.tools/unlink.php",type:"POST",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){gtag("event",currentCache,{event_category:"Account",event_label:"Map Deleted From Account"})},error:function(e,a,t){console.log(e),console.log(a),console.log(t)}})}static save(e){var a=new FormData,t=document.getElementById("mysaves-current-mappreview");t&&a.append("img",t.src),e?a.append("mapName",e):(e=document.getElementById("mysaves-name-input"))&&(a.append("mapName",e.value),e.value="");var n=document.getElementById("mysaves-current-error");n&&(n.style.display="none");var o,r={};for(i in r.filename=MapLoader.save_filename,r.dataid=MapLoader.save_dataid,r.type=MapLoader.save_type,r.year=MapLoader.save_year,r.fontsize=MapLoader.save_fontsize,r.strokewidth=MapLoader.save_strokewidth,r.candidates={},r.states={},r.proportional={},CandidateManager.candidates)"Tossup"!==i&&(o=CandidateManager.candidates[i],r.candidates[o.name]={},r.candidates[o.name].safe=o.colors[0],r.candidates[o.name].solid=o.colors[1],r.candidates[o.name].likely=o.colors[2],r.candidates[o.name].lean=o.colors[3],r.candidates[o.name].tilt=o.colors[4]);for(var s=0;s<states.length;++s){for(i in(d=states[s]).delegates)0===d.delegates[i]&&delete d.delegates[i];r.states[d.name]={},r.states[d.name].delegates=d.delegates,r.states[d.name].simulator=d.simulator,r.states[d.name].colorvalue=d.colorValue,r.states[d.name].disabled=d.disabled}for(var d,i,s=0;s<proportionalStates.length;++s){for(i in(d=proportionalStates[s]).delegates)0===d.delegates[i]&&delete d.delegates[i];r.proportional[d.name]={},r.proportional[d.name].delegates=d.delegates,r.proportional[d.name].simulator=d.simulator,r.proportional[d.name].colorvalue=d.colorValue,r.proportional[d.name].disabled=d.disabled}a.append("data",JSON.stringify(r)),$.ajax({url:"https://yapms.org/users/.tools/upload.php",type:"POST",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){e=e.split(" ");console.log(e),"bad"===e[0]?(n.style.display="inline","no_map_name"===e[1]?n.innerHTML="Enter Map Name":"file_limit"===e[1]?n.innerHTML="File Limit Reached":n.innerHTML="Upload Error"):(e=e[1],Account.addMapBox(e,!0),gtag("event",currentCache,{event_category:"Account",event_label:"Map Saved To Account"}))},error:function(e,a,t){console.log(e),console.log(a),console.log(t)}})}static changePassword(){var e=new FormData,a=document.getElementById("password-reset-1").value,t=document.getElementById("password-reset-2").value,n=document.getElementById("password-reset-3").value;e.append("current",a),e.append("new",t),e.append("verify",n),$.ajax({url:"https://yapms.org/auth/change_password.php",type:"POST",data:e,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){console.log("Change Password: "+e);var a=e.split(" "),e=document.getElementById("passwordchange-info");"good"===a[0]?(closeAllPopups(),displayNotification("Password Change","Your password has been changed"),e.innerHTML="Please enter current and new password",document.getElementById("password-reset-1").value="",document.getElementById("password-reset-2").value="",document.getElementById("password-reset-3").value=""):"bad"===a[0]&&("verify_incorrect"===a[1]?e.innerHTML="Passwords do not match":"incorrect_pass"===a[1]?e.innerHTML="Current password incorrect":"no_post"===a[1]&&(e.innerHTML="Missing information"))},error:function(e,a,t){console.log(e),console.log(a),console.log(t)}})}static forgotPassword(){var e=new FormData,a=document.getElementById("email-forgot-input").value;e.append("email",a),$.ajax({url:"https://yapms.org/auth/forgot_password.php",type:"POST",data:e,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){console.log("Forgot Password: "+e);e=e.split(" ");closeAllPopups(),"good"===e[0]?"reset_sent"===e[1]&&displayNotification("Password Reset","Password reset email sent. (check your spam)"):"bad"===e[0]&&("innactive_account"===e[1]?displayNotification("Password Reset Error",a+" is not active. Please register or verify."):"recent_verification"===e[1]?displayNotification("Password Reset Error","Password was recently reset, please wait."):"please_register"===e[1]&&displayNotification("Password Reset Error",a+" is not registered. Please register."))},error:function(e,a,t){console.log(e),console.log(a),console.log(t)}})}static addMapBox(e,a){var t,n,o,r,s,d,i,l,c=e,u=atob(e),g=document.getElementById("mappreview-"+c);g?g.src="https://yapms.org/users/"+Account.id+"/"+c+".png#"+(new Date).getTime():((t=document.createElement("div")).className="mysaves-mapbox",t.id="mapbox-"+c,(l=document.createElement("div")).className="mysaves-mapbox-header",(d=document.createElement("div")).className="mysaves-mapbox-toolbar",(e=document.createElement("img")).className="toolbar-button toolbar-button-red",e.src="./html/deletebutton.svg",e.setAttribute("title","Delete Map"),e.onclick=(n=c,o=t,r=document.getElementById("mysaves-maps"),function(){Account.unlink(n),r&&o&&r.removeChild(o)}),d.appendChild(e),(g=document.createElement("a")).setAttribute("class","toolbar-button toolbar-button-blue"),g.setAttribute("href","https://yapms.org/users/.tools/download.php?u="+Account.id+"&m="+c),g.setAttribute("title","Download"),(e=document.createElement("img")).src="./html/downloadbutton.svg",e.setAttribute("class","toolbar-button-download"),g.appendChild(e),d.appendChild(g),(g=document.createElement("img")).setAttribute("class","toolbar-button toolbar-button-green"),g.src="./html/overwritebutton.svg",g.setAttribute("title","Overwrite"),g.onclick=(s=u,function(){Account.save(s)}),d.appendChild(g),l.appendChild(d),(d=document.createElement("div")).className="mysaves-mapname",d.innerHTML=u,l.appendChild(d),t.appendChild(l),(l=document.createElement("img")).className="mysaves-mappreview",l.id="mappreview-"+c,l.src="https://yapms.org/users/"+Account.id+"/"+c+".png#"+(new Date).getTime(),l.alt="No Preview",l.onclick=(i="https://www.yapms.com/app/?u="+Account.id+"&m="+c,function(){window.location.href=i}),t.appendChild(l),(l=document.createElement("div")).className="mysaves-url",c=document.createTextNode("https://www.yapms.com/app/?u="+Account.id+"&m="+c),l.appendChild(c),t.appendChild(l),l=document.getElementById("mysaves-maps"),a?l.insertBefore(t,l.firstChild):l.appendChild(t))}static closeMyMaps(){document.getElementById("application-mysaves").style.display="none";for(var e=document.getElementById("mysaves-maps");e.firstChild;)e.removeChild(e.firstChild)}static getMaps(){for(var e=document.getElementById("mysaves-maps");e.firstChild;)e.removeChild(e.firstChild);var a=document.getElementById("mysaves-current-map");a&&(a.style.display="none");a=document.getElementById("mysaves-current-error");a&&(a.style.display="none");a=document.getElementById("application-mysaves");a&&(a.style.display="inline-flex"),html2canvas(document.getElementById("application"),{logging:!1,onclone:function(e){var a=e.getElementById("text");a&&(a.style.fontFamily="arial",a.style.fontSize="15px");var t=e.getElementById("svgdata"),a=e.getElementById("map-div");t&&a&&(t.setAttribute("width",a.offsetWidth),t.setAttribute("height",a.offsetHeight));a=e.getElementById("legend-tooltip");a&&(a.style.display="none");for(var n=e.getElementsByClassName("legend-delete"),o=0,r=n.length;o<r;++o){var s=n[o];s&&(s.style.display="none")}e=e.getElementById("legend-addcandidate-button");e&&(e.style.display="none")}}).then(function(e){e.style.width=0,e.style.height=0,e.style.display="none";e=e.toDataURL("image/png");const a=document.getElementById("mysaves-current-mappreview");a.src=e,a.style.width="40vw",a.style.height="auto";const t=document.getElementById("mysaves-current-map");t&&(t.style.display="inline-flex")}),$.ajax({url:"https://yapms.org/users/.tools/get_maps.php",type:"POST",processData:!1,contentType:!1,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){const a=e.split(" ");for(let e=0;e<a.length;++e){const n=a[e].split("/");var t=n[2].split(".")[0];Account.addMapBox(t,!1)}},error:function(e,a,t){console.log(e),console.log(a),console.log(t)}})}static updateHTML(){const e=document.getElementById("login-button"),a=document.getElementById("account-button"),t=document.getElementById("mymaps-button"),n=document.getElementById("account-email");Account.isLoggedIn?(e.style.display="none",a.style.display="",t.style.display="",n.innerHTML=Account.email):(e.style.display="",a.style.display="none",t.style.display="none")}}Account.email=null,Account.id=null,Account.isLoggedIn=!1,$("#login-form").submit(function(e){e.preventDefault(),Account.login()});class Candidate{constructor(e,a){this.name=e,this.colors=a,this.voteCount=0,this.probVoteCounts=[0,0,0,0,0],a[0]===a[1]&&a[0]===a[2]&&a[0]===a[3]&&a[0]===a[4]?this.singleColor=!0:this.singleColor=!1}}class CandidateManager{static initCandidates(){CandidateManager.candidates=[],CandidateManager.candidates.Tossup=CandidateManager.TOSSUP}static deleteCandidate(){closeAllPopups();for(var e=document.getElementById("candidate-originalName").value,a=0;a<states.length;++a){var t=states[a];t.candidate===e&&t.setColor("Tossup",0),t.delegates[e]=void 0}delete CandidateManager.candidates[e],ChartManager.chart.generateLegend(),countVotes(),LegendManager.updateLegend(),ChartManager.updateChart()}static setCandidate(){closeAllPopups();var e=document.getElementById("candidate-originalName").value,a=document.getElementById("candidate-name").value,t=document.getElementById("candidate-safe").value,n=document.getElementById("candidate-solid").value,o=document.getElementById("candidate-likely").value,r=document.getElementById("candidate-lean").value,s=document.getElementById("candidate-tilt").value;a!==e&&(Object.defineProperty(CandidateManager.candidates,a,Object.getOwnPropertyDescriptor(CandidateManager.candidates,e)),delete CandidateManager.candidates[e]);var d=CandidateManager.candidates[a];d.name=a,d.colors[0]=t,d.colors[1]=n,d.colors[2]=o,d.colors[3]=r,d.colors[4]=s,t===n&&t===o&&t===r&&t===s?(d.singleColor=!0,d.probVoteCounts[0]+=d.probVoteCounts[1]+d.probVoteCounts[2]+d.probVoteCounts[3]+d.probVoteCounts[4],d.probVoteCounts[1]=0,d.probVoteCounts[2]=0,d.probVoteCounts[3]=0,d.probVoteCounts[4]=0):d.singleColor=!1;for(var i=0;i<states.length;++i){var l=states[i];l.candidate===a?(l.setColor(a,l.colorValue,{setDelegates:!1}),console.log(l.colorValue)):l.candidate===e&&(l.setColor(a,l.colorValue,{setDelegates:!1}),l.delegates[a]=l.delegates[e],l.delegates[e]=void 0)}ChartManager.chart.generateLegend(),LegendManager.updateLegend(),ChartManager.updateChart()}static addCandidate(e,a,t,n,o,r){var s,d,i;""!==(e=void 0===e?null!==(s=document.getElementById("name"))?s.value:"Error":e).trim()&&(void 0===a&&(a=null!==(s=document.getElementById("safe"))?s.value:"#000000"),void 0===t&&(t=null!==(d=document.getElementById("solid"))?d.value:"#000000"),void 0===n&&(n=null!==(d=document.getElementById("likely"))?d.value:"#000000"),void 0===o&&(o=null!==(i=document.getElementById("leaning"))?i.value:"#000000"),void 0===r&&(r=null!==(i=document.getElementById("tilting"))?i.value:"#000000"),r=new Candidate(e,[a,t,n,o,r]),CandidateManager.candidates[e]=r,verifyPaintIndex(),ChartManager.chart.generateLegend(),ChartManager.updateChart(),LegendManager.updateLegend())}static saveCustomColors(){var e=document.getElementById("custom-color-name").value,a=document.getElementById("safecustom").value;CookieManager.appendCookie(e+"safe",a);a=document.getElementById("solidcustom").value;CookieManager.appendCookie(e+"solid",a);a=document.getElementById("likelycustom").value;CookieManager.appendCookie(e+"likely",a);a=document.getElementById("leaningcustom").value;CookieManager.appendCookie(e+"leaning",a);a=document.getElementById("tiltingcustom").value;CookieManager.appendCookie(e+"tilting",a),CandidateManager.setColors(e)}static setColors(e){const a=document.getElementById("safe"),t=document.getElementById("solid"),n=document.getElementById("likely"),o=document.getElementById("leaning"),r=document.getElementById("tilting");"red"===e?(a.value="#bf1d29",t.value="#d40000",n.value="#ff5865",o.value="#ff8b98",r.value="#cf8980"):"blue"===e?(a.value="#1c408c",t.value="#0645b4",n.value="#577ccc",o.value="#8aafff",r.value="#949bb3"):"green"===e?(a.value="#1c8c28",t.value="#32aa46",n.value="#50c85e",o.value="#8aff97",r.value="#7a997e"):"yellow"===e?(a.value="#e6b700",t.value="#000000",n.value="#e8c84d",o.value="#ffe78a",r.value="#b8a252"):"blue-light"===e?(a.value="#5555ff",t.value="#000000",n.value="#8080ff",o.value="#aaaaff",r.value="#d5d5ff"):"red-light"===e?(a.value="#ff5555",t.value="#000000",n.value="#ff8080",o.value="#ffaaaa",r.value="#ffd5d5"):"blue-dark"===e?(a.value="#302e80",t.value="#000000",n.value="#444cc5",o.value="#817ffb",r.value="#cdd3f7"):"red-dark"===e?(a.value="#80302e",t.value="#000000",n.value="#cb4b40",o.value="#fb817f",r.value="#f5c8c4"):(a.value=CookieManager.cookies[e+"safe"],t.value=CookieManager.cookies[e+"solid"],n.value=CookieManager.cookies[e+"likely"],o.value=CookieManager.cookies[e+"leaning"],r.value=CookieManager.cookies[e+"tilting"])}}CandidateManager.candidates=[],CandidateManager.tossupColor=2,CandidateManager.TOSSUP=new Candidate("Tossup",["#000000","#696969","#ffffff","#696969","#000000"]);class ChartManager{static initChart(){ChartManager.chartOptions={legendCallback:function(e){console.log("Generating Legend...");var a=document.getElementById("legend-div");a.innerHTML="";var t,n=-1;for(const i in CandidateManager.candidates){const l=CandidateManager.candidates[i];++n;const r=document.createElement("div");r.setAttribute("id",l.name),r.setAttribute("class","legend-button"),r.addEventListener("click",function(){const e=i;return function(){legendClick(e,this)}}()),r.style.background="none",a.appendChild(r);const s=document.createElement("div");s.setAttribute("id",l.name+"-text"),s.setAttribute("class","legend-button-text"),s.style.backgroundColor=l.colors[0],0==n&&(t=l.colors[CandidateManager.tossupColor],s.style.backgroundColor=t),s.style.padding="0px",s.innerHTML=l.name,r.appendChild(s);const c=document.createElement("div");c.setAttribute("class","legend-delete"),c.style.backgroundColor="black",s.appendChild(c);const u=document.createElement("div");if(u.setAttribute("class","legend-color-div"),r.appendChild(u),l.singleColor&&(u.style.display="none"),"Tossup"!==i){const g=document.createElement("div");g.setAttribute("class","legend-delete"),g.addEventListener("click",function(){const e=l.name;return function(){displayCandidateEditMenu(e)}}()),g.style.background="none",php_candidate_edit&&a.appendChild(g);const p=document.createElement("div");p.setAttribute("class","legend-delete-text"),p.style.backgroundColor=l.colors[0],p.style.padding="0px",p.style.fontSize="14px";const C=document.createElement("i");C.classList.add("fas","fa-cog"),p.appendChild(C),g.appendChild(p)}if("Tossup"!==i&&LegendManager.legendLeans){var o=["safe","solid","likely","lean","tilt"];for(let e=0;e<o.length;++e){const m=document.createElement("div");m.classList.add("legend-color"),m.setAttribute("id",l.name+o[e]),m.style.backgroundColor=l.colors[e],u.appendChild(m)}}}const r=document.createElement("div");r.id="legend-addcandidate-button",r.classList.add("legend-button"),r.addEventListener("click",displayAddCandidateMenu),r.style.background="none",php_candidate_edit&&a.appendChild(r);var s=document.createElement("div");s.setAttribute("id","addcandidate-button-text"),s.setAttribute("class","legend-button-text"),s.style.backgroundColor=CandidateManager.candidates.Tossup.colors[CandidateManager.tossupColor],s.style.padding="0px",s.innerHTML="+",r.appendChild(s);var d=document.createElement("div");d.setAttribute("class","legend-color-div"),r.appendChild(d);d=document.createElement("div");d.setAttribute("id","legend-tooltip"),a.appendChild(d);s=document.createElement("div");s.setAttribute("id","legendtooltip-text"),s.setAttribute("class","legend-button-text"),s.style.padding="0px",s.innerHTML="Select a candidate",d.appendChild(s)},legend:{display:!1},tooltips:{display:!0,position:"average",titleFontColor:"black",bodyFontColor:"black",backgroundColor:"white",borderColor:"black",borderWidth:2,caretSize:0,cornerRadius:0},animation:{animateRotate:!1,animateScale:!0},plugins:{datalabels:{display:function(e){return 0!==e.dataset.data[e.dataIndex]},backgroundColor:"white",borderColor:"black",borderRadius:5,borderWidth:2,color:"black",font:{family:"Roboto",size:15,weight:700}}},barStrokeWidth:0},ChartManager.chartBarScales={yAxes:[{stacked:!0,gridLines:{display:!1,drawBorder:!1},ticks:{fontSize:15,fontColor:"#ffffff",fontFamily:"Roboto",fontStyle:500}}],xAxes:[{stacked:!0,gridLines:{display:!1,drawBorder:!1},ticks:{beginAtZero:!0,fontSize:15,fontColor:"#ffffff",fontStyle:500,fontFamily:"Roboto"}}]},ChartManager.chartPieScales={yAxes:[{display:!1}],xAxes:[{display:!1}]},ChartManager.chartPolarScales={display:!1},ChartManager.chartRadarScales={display:!1},ChartManager.chartOptions.scales=ChartManager.chartPieScales,Chart.defaults.global.elements.rectangle.borderWidth=2;var e=document.getElementById("chart-canvas").getContext("2d");e.height=200,ChartManager.chart=new Chart(e,{type:"doughnut",data:{labels:[],datasets:[{label:"",backgroundColor:"#ffffff",borderColor:"#ffffff",borderWidth:0,data:[]},{label:"",backgroundColor:"#ffffff",borderColor:"#ffffff",borderWidth:0,data:[]},{},{}]},options:ChartManager.chartOptions,maintainAspectRatio:!0}),ChartManager.chartType="doughnut"}static setChart(e,a){console.log("Set Chart - "+e);var t,n,o=document.getElementById("chart-div"),r=document.getElementById("chart"),s=document.getElementById("chart-canvas"),d=s.getContext("2d"),i=document.getElementById("battlechart");if(r.style.display="inline-block",i.style.display="none",o.style.display="flex",o.style.width="28vw","none"===e)return s.style.display="none",unsetBattleHorizontal(),o.style.display="none",ChartManager.chartType=e,void MapManager.centerMap();if("horizontalbattle"===e||"verticalbattle"===e)return 3<Object.keys(CandidateManager.candidates).length?void displayNotification("Sorry","This chart requires that there be two candidates"):("horizontalbattle"===e?(setBattleHorizontal(),(n=document.getElementById("logo-div")).style.width="15%",n.style.height="100%",o.style.borderRight="0px",o.style.borderTop="1px solid black",(n=document.getElementById("yapms-watermark")).style.width="15%",n.style.height="100%"):(unsetBattleHorizontal(),o.style.width="20vw",(n=document.getElementById("logo-div")).style.width="100%",n.style.height="15%",o.style.borderTop="0px",o.style.borderRight="1px solid black",(n=document.getElementById("yapms-watermark")).style.width="100%",n.style.height="15%"),s.style.display="none",r.style.display="none",i.style.display="flex",ChartManager.chartType=e,ChartManager.updateChart(),void MapManager.centerMap());if(unsetBattleHorizontal(),"bottom"===(ChartManager.chartPosition=a)?(document.getElementById("application").style.flexDirection="column-reverse",document.getElementById("map-div").style.height="80%",o.style.flexDirection="row",o.style.width="100%",o.style.height="20%",o.style.borderRight="0px",o.style.borderTop="1px solid black",(t=document.getElementById("chart")).style.height="auto",t.style.width=o.offsetHeight-5+"px",(n=document.getElementById("logo-div")).style.width="15%",n.style.height="100%",(n=document.getElementById("yapms-watermark")).style.width="15%",n.style.height="100%"):(document.getElementById("application").style.flexDirection="row",document.getElementById("map-div").style.height="100%",o.style.flexDirection="column",o.style.width="28vw",o.style.height="100%",o.style.borderTop="0px",o.style.borderRight="1px solid black",(t=document.getElementById("chart")).style.width="100%",(n=document.getElementById("logo-div")).style.width="100%",n.style.height="15%",(n=document.getElementById("yapms-watermark")).style.width="100%",n.style.height="15%"),MapManager.centerMap(),ChartManager.chartType=e,ChartManager.chartData={labels:[],datasets:[{borderColor:ChartManager.chartBorderColor,borderWidth:ChartManager.chartBorderWidth,data:[]}]},s.style.display="inline-block","horizontalBar"===e){ChartManager.chartOptions.scales=ChartManager.chartBarScales,delete ChartManager.chartOptions.scale;for(var l=0;l<3;++l)ChartManager.chartData.datasets.push({borderColor:ChartManager.chartBorderColor,borderWidth:ChartManager.chartBorderWidth,data:[]})}else"pie"!==e&&"doughnut"!==e||(ChartManager.chartOptions.scales=ChartManager.chartPieScales,delete ChartManager.chartOptions.scale);ChartManager.chart.destroy(),ChartManager.chart=new Chart(d,{type:e,data:ChartManager.chartData,options:ChartManager.chartOptions}),ChartManager.updateChart()}static rebuildChart(){var e=document.getElementById("chart-canvas").getContext("2d");ChartManager.chart.destroy(),ChartManager.chart=new Chart(e,{type:ChartManager.chart.config.type,data:ChartManager.chartData,options:ChartManager.chartOptions}),"battle"===ChartManager.chartType&&(document.getElementById("chart").style.display="none"),ChartManager.updateChart()}static updateChart(){"verticalbattle"!==ChartManager.chartType&&"horizontalbattle"!==ChartManager.chartType?("horizontalBar"===ChartManager.chartType?ChartManager.updateBarChart():ChartManager.updateNonRadarChart(),ChartManager.chart.config.data=ChartManager.chartData,ChartManager.chart.update()):updateBattleChart()}static updateBarChart(){for(var e in ChartManager.chartData.labels=[],ChartManager.chartData.datasets[0].data=[],ChartManager.chartData.datasets[0].backgroundColor=[],ChartManager.chartData.datasets[1].data=[],ChartManager.chartData.datasets[1].backgroundColor=[],ChartManager.chartData.datasets[2].data=[],ChartManager.chartData.datasets[2].backgroundColor=[],ChartManager.chartData.datasets[3].data=[],ChartManager.chartData.datasets[3].backgroundColor=[],ChartManager.chartData.datasets[4].data=[],ChartManager.chartData.datasets[4].backgroundColor=[],CandidateManager.candidates)ChartManager.chartData.labels.push(e);if(ChartManager.chartLeans)for(var a=0;a<4;++a)for(var e in CandidateManager.candidates){(o=CandidateManager.candidates[e]).name;var t=o.probVoteCounts[a];ChartManager.chartData.datasets[a].data.push(t);var n=o.colors[a];ChartManager.chartData.datasets[a].backgroundColor.push(n)}else for(var e in CandidateManager.candidates){(o=CandidateManager.candidates[e]).name;var o,t=o.voteCount;ChartManager.chartData.datasets[0].data.push(t),n="Tossup"===e?o.colors[2]:o.colors[0],ChartManager.chartData.datasets[0].backgroundColor.push(n)}}static updateNonRadarChart(){ChartManager.chartData.labels=[],ChartManager.chartData.datasets[0].data=[],ChartManager.chartData.datasets[0].backgroundColor=[],ChartManager.chartData.datasets[0].borderColor=ChartManager.chartBorderColor,ChartManager.chartData.datasets[0].borderWidth=ChartManager.chartBorderWidth;var e,a=-1;for(e in CandidateManager.candidates){++a;var t=CandidateManager.candidates[e],n=t.name,o=t.voteCount,r=t.colors[0];if(0==a)r=CandidateManager.candidates.Tossup.colors[CandidateManager.tossupColor],ChartManager.chartData.labels[0]="Tossup",ChartManager.chartData.datasets[0].data[0]=o,ChartManager.chartData.datasets[0].backgroundColor.push(r);else if(ChartManager.chartLeans)for(var s=0;s<4;++s){var d=t.probVoteCounts[s],r=t.colors[s],i=s+4*a-3;ChartManager.chartData.labels[i]=n,ChartManager.chartData.datasets[0].data[i]=d,ChartManager.chartData.datasets[0].backgroundColor.push(r)}else{d=t.voteCount;r=t.colors[0],ChartManager.chartData.labels[a]=n,ChartManager.chartData.datasets[0].data[a]=d,ChartManager.chartData.datasets[0].backgroundColor.push(r)}}}static toggleChartLabels(){ChartManager.chartLabels=!ChartManager.chartLabels,0!=ChartManager.chartOptions.plugins.datalabels.display?ChartManager.chartOptions.plugins.datalabels.display=!1:ChartManager.chartOptions.plugins.datalabels.display=function(e){return 0!==e.dataset.data[e.dataIndex]},ChartManager.rebuildChart()}static toggleChartLeans(){ChartManager.chartLeans=!ChartManager.chartLeans,ChartManager.rebuildChart(),updateBattleChart()}}ChartManager.chart=null,ChartManager.chartBorderWidth=2,ChartManager.chartBorderColor="#000000",ChartManager.chartData={labels:[],datasets:[{label:"",backgroundColor:[],borderColor:ChartManager.chartBorderColor,borderWidth:ChartManager.chartBorderWidth,data:[]},{},{},{}]},ChartManager.chartOptions=null,ChartManager.chartType=null,ChartManager.chartPosition=null,ChartManager.chartPieScales=null,ChartManager.chartBarScales=null,ChartManager.chartPolarScales=null,ChartManager.chartRadarScales=null,ChartManager.chartLeans=!0,ChartManager.chartLabels=!0;class CookieManager{static appendCookie(e,a){var t,n;!1!==CookieManager.consent?(CookieManager.cookies[e]=a,n="",t=new Date(Date.now()+3024e7).toString(),n=e+"="+CookieManager.cookies[e]+"; expires="+t+";",document.cookie=n,console.log("Append cookie: key="+e+" value="+a)):console.log("Cookie Manager: no consent")}static loadCookies(){for(var e=1;e<11;++e)CookieManager.cookies["custom"+e+"safe"]="#000000",CookieManager.cookies["custom"+e+"solid"]="#000000",CookieManager.cookies["custom"+e+"likely"]="#000000",CookieManager.cookies["custom"+e+"leaning"]="#000000",CookieManager.cookies["custom"+e+"tilting"]="#000000";CookieManager.cookies.theme="default";var a,t=decodeURIComponent(document.cookie).split("; ");for(a in t){var n=t[a].split("="),o=n[0],n=n[1];CookieManager.cookies[o]=n}}static loadCustomColors(){for(var e=1;e<11;++e)document.getElementById("custom"+e+"button").style.background="linear-gradient(to right,"+CookieManager.cookies["custom"+e+"safe"]+","+CookieManager.cookies["custom"+e+"solid"]+","+CookieManager.cookies["custom"+e+"likely"]+","+CookieManager.cookies["custom"+e+"leaning"]+","+CookieManager.cookies["custom"+e+"tilting"]+")"}static askConsent(){return"false"===CookieManager.cookies.consent?(CookieManager.consent=!1,void CookieManager.consentDenied()):(CookieManager.cookies.consent,CookieManager.consent=!0,void CookieManager.consentGiven())}static consentDenied(e){document.getElementById("consent").style.display="none",CookieManager.consent=!0,CookieManager.appendCookie("consent",!1),CookieManager.consent=!1,e&&location.reload()}static consentGiven(){document.getElementById("consent").style.display="none",CookieManager.consent=!0,CookieManager.appendCookie("consent",!0)}}CookieManager.cookies={},CookieManager.consent=!1;class InputManager{static enableInputDesktop(){null!=MapManager.panObject&&(MapManager.panObject.isPanEnabled(),MapManager.panObject.isZoomEnabled()),MapManager.panObject=svgPanZoom("#svgdata",{fit:!0,center:!0,contain:!1,panEnabled:!0,zoomEnabled:!0,dblClickZoomEnabled:!1,maxZoom:100,zoomScaleSensitivity:.1})}static enableInputMobile(){var e={haltEventListeners:["touchstart","touchend","touchmove","touchleave","touchcancel"],init:function(e){var a=e.instance,t=1,n=0,o=0;this.hammer=Hammer(e.svgElement,{inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput}),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("panstart panmove",function(e){"panstart"===e.type&&(o=n=0),a.panBy({x:e.deltaX-n,y:e.deltaY-o}),n=e.deltaX,o=e.deltaY}),this.hammer.on("pinchstart pinchmove",function(e){"pinchstart"===e.type&&(t=a.getZoom(),a.zoomAtPoint(t*e.scale,{x:e.center.x,y:e.center.y})),a.zoomAtPoint(t*e.scale,{x:e.center.x,y:e.center.y})})}};MapManager.panObject=svgPanZoom("#svgdata",{fit:!0,center:!0,contain:!1,maxZoom:100,zoomScaleSensitivity:.1,dblClickZoomEnabled:!1,customEventsHandler:e})}}class KeyboardManager{static quickFill(){return!0===KeyboardManager.keyStates[70]}static areaSelect(){return!0===KeyboardManager.keyStates[68]}}KeyboardManager.keyStates={},document.addEventListener("keydown",function(e){KeyboardManager.keyStates[e.which]=!0}),document.addEventListener("keyup",function(e){KeyboardManager.keyStates[e.which]=!1}),document.addEventListener("mouseleave",function(e){KeyboardManager.keyStates={}}),document.addEventListener("mouseenter",function(e){KeyboardManager.keyStates={}});class LegendManager{static toggleLegendCounter(){LegendManager.legendCounter=!LegendManager.legendCounter,LegendManager.updateLegend()}static toggleLegendLeans(){LegendManager.legendLeans=!LegendManager.legendLeans,ChartManager.chart.generateLegend(),LegendManager.updateLegend()}static selectCandidateDisplay(e){for(var a=e.parentElement.children,t=0;t<a.length;++t)a[t].childNodes[0].style.padding="4px";e.childNodes[0].style.padding="7px"}static updateLegend(){for(var e in CandidateManager.candidates){var a=CandidateManager.candidates[e],t=document.getElementById(a.name+"-text"),n=a.name;1==LegendManager.legendCounter&&(n+=" "+a.voteCount),null!==t&&(t.innerHTML=n),e===paintIndex&&LegendManager.selectCandidateDisplay(t.parentElement)}}}LegendManager.legendCounter=!0,LegendManager.legendLeans=!0;class LogoManager{static toggleLogo(e){var a=document.getElementById("logo-div");switch(e){case"LTE":a.style.backgroundImage='url("https://www.yapms.com/app/res/logos/lte.png")';break;case"RedEagle":a.style.backgroundImage='url("https://www.yapms.com/app/res/logos/redeagletv.png")';break;case"PG":a.style.backgroundImage='url("https://www.yapms.com/app/res/logos/pg.png")';break;case"EP":a.style.backgroundImage='url("https://www.yapms.com/app/res/logos/ep.png")';break;case"RedDonkey":a.style.backgroundImage='url("https://www.yapms.com/app/res/logos/reddonkey.png")';break;case"PoliticalAnalyst":a.style.backgroundImage='url("https://www.yapms.com/app/res/logos/pa.jpg")';break;case"CommanderVideo":a.style.backgroundImage='url("https://yt3.ggpht.com/ytc/AAUvwngdjF6yfRaC-PiVvALYVzKMbYQi2rcHKHWuRSot_A=s88-c-k-c0x00ffffff-no-rj")'}LogoManager.currentLogo!==e||""===a.style.display?a.style.display="inline":"inline"===a.style.display&&(a.style.display=""),LogoManager.currentLogo=e}static loadButtons(){if(!LogoManager.buttonsLoaded){LogoManager.buttonsLoaded=!0;for(var e=document.getElementsByClassName("backbutton-addcandidatemenu"),a=document.getElementsByClassName("backbutton"),t=document.getElementsByClassName("closebutton"),n=0;n<e.length;++n)e[n].setAttribute("data","./html/backbutton-addcandidate.svg");for(n=0;n<a.length;++n)a[n].setAttribute("data","./html/backbutton.svg");for(n=0;n<t.length;++n)t[n].setAttribute("data","./html/closebutton.svg")}}static loadFlags(){if(!LogoManager.flagsLoaded){LogoManager.flagsLoaded=!0;for(var e=["aus","usa","bra","can","ger","ind","ita","ire","ned","prt","rus","esp","tur","ukd","eu","un","fra","tat","che","zaf","swe","arg","pak"],a=0;a<e.length;++a)for(var t=e[a],n=document.getElementsByClassName("flag-"+t),o=0;o<n.length;++o)n[o].setAttribute("src","res/flags/"+t+".svg")}}}LogoManager.currentLogo="",LogoManager.buttonsLoaded=!1,LogoManager.flagsLoaded=!1;class MapManager{static centerMap(){null!==MapManager.panObject&&(MapManager.panObject.resize(),MapManager.panObject.fit(),MapManager.panObject.center(),MapManager.panObject.zoomBy(.85))}static setLockMap(e){var a=document.getElementById("lockbutton");!0===e?(a&&(a.style.opacity="0.5"),MapManager.panObject.disablePan(),MapManager.panObject.disableZoom(),MapManager.lockedMap=!0):(a&&(a.style.opacity="1"),MapManager.panObject.enablePan(),MapManager.panObject.enableZoom(),MapManager.lockedMap=!1)}static toggleLockMap(){var e=document.getElementById("lockbutton");MapManager.lockedMap?(e&&(e.style.opacity="1"),MapManager.panObject.enablePan(),MapManager.panObject.enableZoom(),MapManager.lockedMap=!1):(e&&(e.style.opacity="0.5"),MapManager.panObject.disablePan(),MapManager.panObject.disableZoom(),MapManager.lockedMap=!0)}}MapManager.lockedMap=!1,MapManager.panObject=null;var enableCongress=!1,enableCongressContested=!1;class MapLoader{static loadPresetMap(e,a){CandidateManager.initCandidates();var t=!1;a&&(t=a.enableCongress),"usa/USA_2020_house_cook"===e&&(t=enableCongressContested=!0),fetch("./res/presets/"+e).then(e=>e.json()).then(e=>{console.log(e),MapLoader.loadSavedMap(e,{enableCongress:t})}).catch(e=>{console.error(e)})}static loadMapFromURL(e){console.log("Map Loader: "+e),fetch(e).then(e=>e.json()).then(e=>{PresetLoader.loadPreset("none"),console.log("Map Load: Found saved map"),console.log("Map Loader: Attemping new file load"),MapLoader.loadSavedMap(e)}).catch(e=>{console.log("Map Loader: Did not find saved map"),MapLoader.loadMap("./res/usa_presidential.svg",16,1,"usa_ec","presidential","open");var a=document.getElementById("notification"),t=a.querySelector("#notification-message");a.querySelector("#notification-title").innerHTML="Sorry",t.innerHTML="The map you are looking for does not exist.<br><br>This feature is still in development and it may have been deleted.",a.style.display="inline"})}static loadMapFromId(e){switch(e){case"USA_current_house":PresetLoader.loadPreset("none"),MapLoader.loadPresetMap("usa/"+e,{enableCongress:!0});break;case"UnitedKingdom_current_parliament":PresetLoader.loadPreset("none"),MapLoader.loadPresetMap("ukd/"+e);break;case"USA_current_senate":case"USA_2024_projection":case"USA_2020_cook":case"USA_2020_inside":case"USA_2020_sabatos":case"USA_2020_house_cook":case"USA_2016_presidential":case"USA_2016_presidential_county":case"USA_2016_democratic_primary":case"USA_2016_republican_primary":case"USA_2012_presidential":case"USA_2008_presidential":case"USA_2004_presidential":case"USA_2000_presidential":case"USA_1996_presidential":case"USA_1992_presidential":case"USA_1988_presidential":case"USA_1984_presidential":case"USA_1980_presidential":case"USA_1976_presidential":case"USA_1972_presidential":case"USA_1968_presidential":case"USA_1964_presidential":case"USA_1960_presidential":case"USA_1956_presidential":case"USA_1952_presidential":case"USA_1948_presidential":case"USA_1944_presidential":case"USA_1940_presidential":case"USA_1936_presidential":case"USA_1932_presidential":case"USA_1928_presidential":case"USA_1924_presidential":case"USA_1920_presidential":case"USA_1916_presidential":case"USA_1912_presidential":case"USA_1908_presidential":case"USA_1904_presidential":case"USA_1900_presidential":case"USA_1896_presidential":case"USA_1892_presidential":case"USA_1888_presidential":case"USA_1884_presidential":case"USA_1880_presidential":case"USA_1876_presidential":case"USA_1872_presidential":case"USA_1868_presidential":case"USA_1864_presidential":case"USA_1789_presidential":case"USA_1792_presidential":case"USA_1796_presidential":case"USA_1800_presidential":case"USA_1804_presidential":case"USA_1808_presidential":case"USA_1812_presidential":case"USA_1816_presidential":case"USA_1820_presidential":case"USA_1824_presidential":case"USA_1828_presidential":case"USA_1832_presidential":case"USA_1836_presidential":case"USA_1840_presidential":case"USA_1844_presidential":case"USA_1848_presidential":case"USA_1852_presidential":case"USA_1856_presidential":case"USA_1860_presidential":PresetLoader.loadPreset("none"),MapLoader.loadPresetMap("usa/"+e);break;case"USA_trump_impeachment_support":PresetLoader.loadPreset("none"),MapLoader.loadPresetMap("usa/"+e,{enableCongress:!0});break;case"Canada_2019_house_of_commons":PresetLoader.loadPreset("none"),MapLoader.loadPresetMap("can/"+e);break;case"Alabama_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/alabama/2020_house.svg",16,.15,"1","takeall_noedit","open");break;case"Alaska_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/alaska/2020_house.svg",16,.02,"1","takeall_noedit","open");break;case"Arkansas_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/arkansas/2020_upper.svg",16,4.5,"1","takeall_noedit","open");break;case"Arkansas_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/arkansas/2020_house.svg",16,150,"1","takeall_noedit","open");break;case"California_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/california/2020_upper.svg",16,.25,"1","takeall_noedit","open");break;case"California_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/california/2020_house.svg",16,.1,"1","takeall_noedit","open");break;case"Colorado_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/colorado/2020_house.svg",16,.15,"1","takeall_noedit","open");break;case"Connecticut_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/connecticut/2020_house.svg",16,.5,"1","takeall_noedit","open");break;case"Florida_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/florida/2020_upper.svg",16,.3,"1","takeall_noedit","open");break;case"Florida_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/florida/2020_house.svg",16,.25,"1","takeall_noedit","open");break;case"Hawaii_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/hawaii/2020_house.svg",16,.2,"1","takeall_noedit","open");break;case"Idaho_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/idaho/2020_house.svg",16,.2,"1","takeall_noedit","open");break;case"Idaho_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/idaho/2020_house.svg",16,.2,"2","proportional","open");break;case"Iowa_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/iowa/2020_house.svg",16,.2,"1","takeall_noedit","open");break;case"Iowa_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/iowa/2020_senate.svg",16,.2,"1","takeall_noedit","open");break;case"Michigan_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/michigan/2020_house.svg",16,.2,"1","takeall_noedit","open");break;case"Minnesota_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/minnesota/2020_upper.svg",16,.5,"1","takeall_noedit","open");break;case"Minnesota_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/minnesota/2020_house.svg",16,.5,"1","takeall_noedit","open");break;case"NewJersey_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/newjersey/2020_house.svg",16,.1,"1","takeall_noedit","open");break;case"NewJersey_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/newjersey/2020_house.svg",16,.1,"2","proportional","open");break;case"NewMexico_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/newmexico/2020_house.svg",16,.1,"1","takeall_noedit","open");break;case"NorthCarolina_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/northcarolina/2020_senate.svg",16,.5,"1","takeall_noedit","open");break;case"NorthDakota_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/northdakota/2020_upper.svg",16,.1,"1","takeall_noedit","open");break;case"NorthDakota_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/northdakota/2020_house.svg",16,.1,"2","proportional","open");break;case"Ohio_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/ohio/2020_upper.svg",16,.05,"1","takeall_noedit","open");break;case"Ohio_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/ohio/2020_lower.svg",16,.1,"1","takeall_noedit","open");break;case"Oregon_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/oregon/2020_upper.svg",16,0,"1","takeall_noedit","open");break;case"Oregon_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/oregon/2020_house.svg",16,.1,"1","takeall_noedit","open");break;case"Pennsylvania_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/pennsylvania/2020_upper.svg",16,.5,"1","takeall_noedit","open");break;case"Pennsylvania_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/pennsylvania/2020_house.svg",16,.25,"1","takeall_noedit","open");break;case"SouthDakota_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/southdakota/2020_house.svg",16,1,"1","takeall_noedit","open");break;case"Texas_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/texas/2020_upper.svg",16,.75,"1","takeall_noedit","open");break;case"Texas_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/texas/2020_house.svg",16,.5,"1","takeall_noedit","open");break;case"Virginia_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/virginia/2020_senate.svg",16,.015,"1","takeall_noedit","open");break;case"Virginia_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/virginia/2020_house.svg",16,.015,"1","takeall_noedit","open");break;case"Washington_2020_state_upper":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/washington/2020_house.svg",16,.15,"1","takeall_noedit","open");break;case"Washington_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/washington/2020_house.svg",16,.15,"2","proportional","open");break;case"Wisconsin_2020_state_lower":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/wisconsin/2020_house.svg",16,.5,"1","takeall_noedit","open");break;case"USA_presidential_territories":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/usa_presidential_territories.svg",16,.75,"usa_territories_ec","takeall","open");break;case"USA_2024_presidential":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/presidential/usa_presidential.svg",16,.75,"usa_2024_ec","takeall","open");break;case"USA_2020_presidential":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/presidential/usa_presidential.svg",16,.75,"usa_ec","takeall","open");break;case"USA_split_maine":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/presidential/usa_1972_presidential.svg",16,.75,"usa_1972_ec","takeall","open");break;case"USA_2022_senate":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/senate/usa_senate.svg",16,1,"1","senatorial","2022");break;case"USA_2020_senate":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/senate/usa_senate.svg",16,1,"1","senatorial","2020");break;case"USA_2022_governors":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/governors/usa_gubernatorial.svg",16,.75,"1","gubernatorial","2022");break;case"USA_2021_governors":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/governors/usa_gubernatorial.svg",16,.75,"1","gubernatorial","2021");break;case"USA_2020_governors":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/governors/usa_gubernatorial.svg",16,.75,"1","gubernatorial","2020");break;case"USA_2019_governors":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/governors/usa_gubernatorial.svg",16,.75,"1","gubernatorial","2019");break;case"USA_2020_democratic_primary":PresetLoader.loadPreset("democratic primary"),MapLoader.loadMap("./res/usa/primary/usa_dem_primary.svg",16,.75,"dem_primary","proportional","open");break;case"USA_2020_republican_primary":PresetLoader.loadPreset("republican primary"),MapLoader.loadMap("./res/usa/primary/usa_rep_primary.svg",16,.75,"rep_primary","proportional","open");break;case"USA_county":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/county/usa_county.svg",16,.075,"1","takeall_noedit","open");break;case"USA_2022_house":case"USA_2020_house":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/house/12-2-2019-house.svg",16,.075,"1","takeall_noedit","open",{enableCongress:!0,enableEraser:!0});break;case"USA_2008_house":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/house/usa_congressional_2008.svg",16,.005,"1","takeall_noedit","open");break;case"USA_governors":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/governors/usa_gubernatorial.svg",16,.75,"1","gubernatorial","open");break;case"USA_senate":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/senate/usa_senate.svg",16,.75,"1","senatorial","open");break;case"USA_takeall":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/presidential/usa_no_districts.svg",16,.75,"usa_no_districts_ec","takeall","open");break;case"USA_proportional":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa/presidential/usa_no_districts.svg",16,.75,"usa_no_districts_ec","proportional","open");break;case"USA_pre_civilwar":MapLoader.loadMap("./res/usa/presidential/usa_pre_civilwar.svg",16,.75,"usa_pre_civilwar_ec","presidential","open");break;case"Pakistan_national_assembly":PresetLoader.loadPreset("pakistan"),MapLoader.loadMap("./res/pak/pakistan_constituencies.svg",16,.02,"1","takeall_noedit","open");break;case"Argentina_chamber_of_deputies":PresetLoader.loadPreset("argentina"),MapLoader.loadMap("./res/arg/argentina_provinces_buenos.svg",16,.75,"argentina_chamber_of_deputies","proportional","open");break;case"India_2019_lok_sabha":PresetLoader.loadPreset("none"),MapLoader.loadPresetMap("ind/"+e);break;case"USA_Canada":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/other/usa_canada.svg",16,.01,"1","takeall","open");break;case"Germany_states":PresetLoader.loadPreset("germany"),MapLoader.loadMap("./res/deu/germany.svg",16,1,"1","takeall","open");break;case"Germany_bundestag":PresetLoader.loadPreset("germany"),MapLoader.loadMap("./res/deu/germany_constituencies.svg",16,.25,"1","takeall_noedit","open");break;case"France_national_assembly":PresetLoader.loadPreset("france"),MapLoader.loadMap("./res/fra/france_constituencies.svg",16,.25,"1","takeall_noedit","open");break;case"Netherlands_provinces":PresetLoader.loadPreset("netherlands"),MapLoader.loadMap("./res/nld/netherlands_provinces.svg",16,.15,"netherlands_provinces","proportional","open");break;case"Netherlands_gemeenten":PresetLoader.loadPreset("netherlands"),MapLoader.loadMap("./res/nld/netherlands_gemeenten.svg",16,.15,"1","takeall_noedit","open");break;case"Italy_states":PresetLoader.loadPreset("italy"),MapLoader.loadMap("./res/ita/italy.svg",16,1,"1","takeall_noedit","open");break;case"Portugal_assembly_of_the_republic":PresetLoader.loadPreset("portugal"),MapLoader.loadMap("./res/prt/portugal_constituencies.svg",16,.25,"portugal_constituencies","proportional","open");break;case"Poland":PresetLoader.loadPreset("portugal"),MapLoader.loadMap("./res/pol/poland_senate.svg",16,.25,"1","takeall_noedit","open");break;case"Spain_congress_of_deputies":PresetLoader.loadPreset("spain"),MapLoader.loadMap("./res/esp/spain_constituencies.svg",16,.25,"spain_constituencies","proportional","open");break;case"Sweden_riksdag":PresetLoader.loadPreset("sweden"),MapLoader.loadMap("./res/swe/sweden_districts.svg",25,.25,"sweden_riksdag","proportional","open");break;case"Turkey_national_assembly":PresetLoader.loadPreset("turkey"),MapLoader.loadMap("./res/tur/turkey_provinces.svg",16,.5,"turkey_national_assembly","proportional","open");break;case"India_lok_sabha":PresetLoader.loadPreset("india"),MapLoader.loadMap("./res/ind/india_constituencies.svg",16,.1,"1","takeall_noedit","open");break;case"SouthAfrica_national_assembly":PresetLoader.loadPreset("southafrica"),MapLoader.loadMap("./res/zaf/south_africa_provinces.svg",25,.25,"south_africa_national_assembly","proportional","open");break;case"UnitedKingdom_house_of_commons":PresetLoader.loadPreset("uk"),MapLoader.loadMap("./res/ukd/unitedkingdom.svg",16,.075,"1","takeall_noedit","open");break;case"UnitedKingdom_historic_counties":PresetLoader.loadPreset("uk"),MapLoader.loadMap("./res/ukd/unitedkingdom_historic_counties.svg",16,.4,"1","takeall","open");break;case"Ukraine":PresetLoader.loadPreset("uk"),MapLoader.loadMap("./res/ukr/ukraine.svg",16,.1,"1","takeall_noedit","open");break;case"Ireland_dail_eireann":PresetLoader.loadPreset("ireland"),MapLoader.loadMap("./res/irl/ireland_constituencies_2020.svg",16,.075,"ireland_constituencies","proportional","open");break;case"Canada_provinces":PresetLoader.loadPreset("canada"),MapLoader.loadMap("./res/can/canada_states.svg",38,2,"1","takeall","open");break;case"Canada_house_of_commons":PresetLoader.loadPreset("canada"),MapLoader.loadMap("./res/can/canada_constituencies.svg",16,.1,"1","takeall_noedit","open");break;case"Australia_house_of_representatives":PresetLoader.loadPreset("australia"),MapLoader.loadMap("./res/aus/australia_constituencies.svg",16,.1,"1","takeall_noedit","open");break;case"Australia_states":PresetLoader.loadPreset("australia"),MapLoader.loadMap("./res/aus/australia.svg",16,.075,"1","takeall","open");break;case"Brazil_chamber_of_deputies":PresetLoader.loadPreset("brazil"),MapLoader.loadMap("./res/bra/brazil_states.svg",16,50,"brazil_deputies","proportional","open");break;case"Brazil_federal_senate":PresetLoader.loadPreset("brazil"),MapLoader.loadMap("./res/bra/brazil_states.svg",16,50,"3","proportional","open");break;case"Russia_federal_council":PresetLoader.loadPreset("russia"),MapLoader.loadMap("./res/rus/russia_federal_subjects.svg",16,.25,"2","proportional","open");break;case"Russia_duma":PresetLoader.loadPreset("russia"),MapLoader.loadMap("./res/rus/russia_constituencies.svg",16,.15,"duma","takeall_noedit","open");break;case"Trinidad_Tobago_house_of_representatives":PresetLoader.loadPreset("trinidad_tobago"),MapLoader.loadMap("./res/tto/trinidad_tobago_house_of_representatives.svg",16,.25,"1","takeall_noedit","open");break;case"Switzerland_national_council":PresetLoader.loadPreset("switzerland"),MapLoader.loadMap("./res/che/switzerland_cantons.svg",16,.25,"switzerland_national_council","proportional","open");break;case"Switzerland_council_of_states":PresetLoader.loadPreset("switzerland"),MapLoader.loadMap("./res/che/switzerland_cantons.svg",16,.25,"switzerland_council_of_states","proportional","open");break;case"EuropeanUnion":PresetLoader.loadPreset("eu"),MapLoader.loadMap("./res/eu/eu.svg",16,.25,"eu_parliament","proportional","open");break;case"World":PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/other/world.svg",38,.25,"1","takeall","open");break;case"YAPmg":default:PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa_presidential.svg",16,1,"usa_ec","takeall","open")}}static loadMap(a,t,e,n,o,r,s){var d,i,l,c;(MapLoader.save_filename!==a||MapLoader.save_dataid!==n||MapLoader.save_type!==o||MapLoader.save_year!==r||MapLoader.save_fontsize!==t||MapLoader.save_strokewidth!==e||(s&&s.onLoad&&s.onLoad(),s&&s.clear&&!0===s.clear))&&(setMode("paint"),"open"!==r&&((i=document.getElementById("modebutton-ec"))&&(i.style.display="none"),(d=document.getElementById("modebutton-delete"))&&(d.style.display="none")),"takeall_noedit"===o&&((i=document.getElementById("modebutton-ec"))&&(i.style.display="none"),setMode("fill")),"takeall_noedit"!==o&&"takeall"!==o&&"senatorial"!==o&&"gubernatorial"!==o||((i=document.getElementById("modebutton-paint"))&&(i.style.display="none"),setMode("fill")),MapLoader.save_filename=a,MapLoader.save_dataid=n,MapLoader.save_type=o,MapLoader.save_year=r,MapLoader.save_fontsize=t,MapLoader.save_strokewidth=e,s&&(enableCongress=s.enableCongress,verifyCongress()),(l=document.getElementById("map-div")).style.visibility="hidden",totalVotes=0,strokeMultiplier=e,c="./data/"+o+"_"+r,console.log("Loading "+a),fetch(a).then(e=>e.text()).then(e=>{document.getElementById("map-div").innerHTML=e,console.log("Done loading "+a),MapLoader.onLoadSVG(),!0===mobile?InputManager.enableInputMobile():!1===mobile&&InputManager.enableInputDesktop(),MapManager.centerMap(),onResize();e=document.getElementById("text");null!==e&&(e.style.fontSize=t+"px"),MapLoader.initData(n),countVotes(),ChartManager.updateChart(),LegendManager.updateLegend(),setCongressOnHover(),setPalette(CookieManager.cookies.theme);e=function(){s&&s.onLoad&&s.onLoad(),showShortcuts();var e=document.getElementById("application-loading");setTimeout(function(){e.style.display="none"},200)};"senatorial"===o&&"open"!==r?MapLoader.loadSenateFile(c,e):"gubernatorial"===o&&"open"!==r?MapLoader.loadGubernatorialFile(c,e):(l.style.visibility="visible",e())}))}static onLoadSVG(){ifInIframe()}static loadGubernatorialFile(d,i){CandidateManager.initCandidates();var l={};fetch(d).then(e=>e.text()).then(e=>{console.log("Done loading "+d);var a="candidate",t=e.split("\n");""===t[t.length-1]&&t.pop();for(var n=0;n<t.length;++n){var o,r,s=t[n].trim();"candidate"===a?"!"===s?a="disable":(o=s.split(" "),l[o[0]]=o[1],r=new Candidate(o[1],[o[2],o[3],o[4],o[5]]),CandidateManager.candidates[o[1]]=r):"disable"===a&&(o=s.split(" "),s=states.find(e=>e.name===o[0]),r=l[o[1]],"o"===o[1]?s.setColor("Tossup",2):(s.setColor(r,0),s.toggleLock()))}countVotes(),ChartManager.updateChart(),LegendManager.updateLegend(),document.getElementById("map-div").style.visibility="visible",i()})}static loadSenateFile(d,i){CandidateManager.initCandidates();var l={};fetch(d).then(e=>e.text()).then(e=>{console.log("FETCH SEN"),console.log("Done loading "+d);var a="candidate",t=e.split("\n");""===t[t.length-1]&&t.pop();for(var n=0;n<t.length;++n){var o,r,s=t[n].trim();"candidate"===a?"!"===s?a="disable":(o=s.split(" "),l[o[0]]=o[1],r=new Candidate(o[1],[o[2],o[3],o[4],o[5]]),CandidateManager.candidates[o[1]]=r):"disable"===a&&(o=s.split(" "),r=states.find(e=>e.name===o[0]),s=states.find(e=>e.name===o[0]+"-S"),"o"===o[1]?r.setColor("Tossup",2):(r.setColor(l[o[1]],0),r.toggleLock()),"o"===o[2]?s.setColor("Tossup",2):(s.setColor(l[o[2]],0),s.toggleLock()))}countVotes(),ChartManager.updateChart(),LegendManager.updateLegend(),document.getElementById("map-div").style.visibility="visible",i()})}static loadSavedMap(e,a){let u=e;enableCongress=!!a&&a.enableCongress,MapLoader.loadMap(u.filename,u.fontsize,u.strokewidth,u.dataid,u.type,u.year,{enableCongress:enableCongress,onLoad:function(){for(var e in u.candidates){var a;"Tossup"!==e&&(a=u.candidates[e],CandidateManager.addCandidate(e,a.safe,a.solid,a.likely,a.lean,a.tilt))}for(let o in u.states){var r,s=u.states[o];let e=states.filter(e=>e.name===o)[0],a=0,t="Tossup",n=0;for(r in s.delegates){var d=s.delegates[r];a+=d,d>n?(t=r,n=d):d===n&&(t="Tossup")}e.setVoteCount(a),"Tossup"===t?e.setColor(t,2):e.setColor(t,s.colorvalue),s.candidate?(e.setColor(s.candidate,s.colorvalue),"proportional"===u.type&&(e.delegates=s.delegates)):e.delegates=s.delegates,e.simulator=s.simulator,s.disabled&&e.toggleDisable()}for(let o in u.proportional){var i,l=u.proportional[o];let e=proportionalStates.filter(e=>e.name===o)[0],a=0,t="Tossup",n=0;for(i in l.delegates){var c=l.delegates[i];a+=c,c>n?(t=i,n=c):c===n&&(t="Tossup")}e.setVoteCount(a),"Tossup"===t?e.setColor(t,2):e.setColor(t,l.colorvalue),e.simulator=l.simulator,e.delegates=l.delegates,l.disabled&&e.toggleDisable()}countVotes(),ChartManager.updateChart(),LegendManager.updateLegend(),document.getElementById("map-div").style.visibility="visible"}})}static loadFileMap(){var e=document.getElementById("loadfile").files[0],a=new FileReader;a.onload=function(e){e=e.target.result;MapLoader.loadSavedMap(JSON.parse(e)),closeAllPopups()},a.readAsText(e,"UTF-8")}static initData(e){states=[],buttons=[],lands=[];for(var a=document.getElementById("outlines").children,t=0,n=a.length;t<n;++t){var o=a[t];o.setAttribute("style","inherit"),o.setAttribute("cursor","pointer"),null===(i=o.getAttribute("id"))||i.includes("*lines*")||i.includes("*ignore*")||i.includes("_ignore_")||i.includes("othertext")||"text"===i||(i.includes("-button")?(o.onclick=function(){buttonClick(this)},o.addEventListener("mouseover",function(){KeyboardManager.keyStates[70]&&buttonClick(this,{setSafe:!0})}),buttons.push(o)):i.includes("-land")?(o.onclick=function(){landClick(this)},o.addEventListener("mouseover",function(){KeyboardManager.keyStates[70]&&landClick(this,{setSafe:!0})}),lands.push(o)):(o.onclick=function(){stateClick(this)},states.push(new State(i,o,e)),states.length,o.addEventListener("mouseover",function(){KeyboardManager.keyStates[70]&&stateClick(this,{setSafe:!0})})))}var r=document.getElementById("proportional");if(r)for(var s=r.children,t=0,n=s.length;t<n;++t){var d=s[t];d.setAttribute("cursor","pointer"),d.setAttribute("style","inherit");var i=d.getAttribute("id"),l=new State(i,d,e);proportionalStates.push(l),d.onclick=function(){var e=proportionalStates.length-1;return function(){stateClickPaint(proportionalStates[e],{forceProportional:!0})}}()}}static clearMap(){MapLoader.loadMap(MapLoader.save_filename,MapLoader.save_fontsize,MapLoader.save_strokewidth,MapLoader.save_dataid,MapLoader.save_type,MapLoader.save_year,{clear:!0}),MapManager.setLockMap(!1)}static clearMapCandidates(){for(var e=0;e<states.length;++e)(a=states[e]).setColor("Tossup",2),a.resetDelegates();for(var a,e=0;e<proportionalStates.length;++e)(a=proportionalStates[e]).setColor("Tossup",2),a.resetDelegates()}}MapLoader.save_filename="",MapLoader.save_dataid="",MapLoader.save_type="",MapLoader.save_year="",MapLoader.save_fontsize="",MapLoader.save_strokewidth="";class PresetLoader{static loadPreset(e){switch(CandidateManager.initCandidates(),e){case"none":break;case"classic":PresetLoader.loadPresetClassic();break;case"republican primary":PresetLoader.loadPresetRepublicanPrimary();break;case"democratic primary":PresetLoader.loadPresetDemocraticPrimary();break;case"argentina":PresetLoader.loadPresetArgentina();break;case"france":PresetLoader.loadPresetFrance();break;case"germany":PresetLoader.loadPresetGermany();break;case"southafrica":PresetLoader.loadPresetSouthAfrica();break;case"india":PresetLoader.loadPresetIndia();break;case"italy":PresetLoader.loadPresetItaly();break;case"uk":PresetLoader.loadPresetUK();break;case"canada":PresetLoader.loadPresetCanada();break;case"australia":PresetLoader.loadPresetAustralia();break;case"spain":PresetLoader.loadPresetSpain();break;case"turkey":PresetLoader.loadPresetTurkey();break;case"trinidad_tobago":PresetLoader.loadPresetTrinidadTobago();break;case"netherlands":PresetLoader.loadPresetNetherlands();break;case"brazil":PresetLoader.loadPresetBrazil();break;case"ireland":PresetLoader.loadPresetIreland();break;case"russia":PresetLoader.loadPresetRussia();break;case"switzerland":PresetLoader.loadPresetSwitzerland();break;case"sweden":PresetLoader.loadPresetSweden();break;case"portugal":PresetLoader.loadPresetPortugal();break;case"pakistan":PresetLoader.loadPresetPakistan();case"eu":PresetLoader.loadPresetEU()}ChartManager.updateChart(),ChartManager.chart.generateLegend(),LegendManager.updateLegend()}static loadPresetClassic(){var e=new Candidate("Democratic",["#1c408c","#0645b4","#577ccc","#8aafff","#949bb3"]),a=new Candidate("Republican",["#bf1d29","#d40000","#ff5865","#ff8b98","#cf8980"]);CandidateManager.candidates.Democratic=e,CandidateManager.candidates.Republican=a}static loadPresetRepublicanPrimary(){var e=new Candidate("Trump",["#bf1d29","#bf1d29","#bf1d29","#bf1d29"]),a=new Candidate("Weld",["#e6b700","#e6b700","#e6b700","#e6b700"]),t=new Candidate("Walsh",["#1c408c","#1c408c","#1c408c","#1c408c"]);CandidateManager.candidates.Trump=e,CandidateManager.candidates.Weld=a,CandidateManager.candidates.Walsh=t}static loadPresetDemocraticPrimary(){var e=new Candidate("Biden",["#009900","#009900","#009900","#009900"]),a=new Candidate("Sanders",["#457FFF","#457FFF","#457FFF","#457FFF"]),t=new Candidate("Warren",["#996600","#996600","#996600","#996600"]),n=new Candidate("Gabbard",["#FF0074","#FF0074","#FF0074","#FF0074"]),o=new Candidate("Buttigieg",["#990099","#990099","#990099","#990099"]),r=new Candidate("Bloomberg",["#ff9900","#ff9900","#ff9900","#ff9900"]),s=new Candidate("Klobuchar",["#000000","#000000","#000000","#000000"]);CandidateManager.candidates.Biden=e,CandidateManager.candidates.Sanders=a,CandidateManager.candidates.Warren=t,CandidateManager.candidates.Bloomberg=r,CandidateManager.candidates.Buttigieg=o,CandidateManager.candidates.Klobuchar=s,CandidateManager.candidates.Gabbard=n}static loadPresetFrance(){var e=new Candidate("RN",["#004A77","#004A77","#004A77","#004A77"]),a=new Candidate("LREM",["#FFD600","#FFD600","#FFD600","#FFD600"]),t=new Candidate("EÉLV",["#7AB41D","#7AB41D","#7AB41D","#7AB41D"]),n=new Candidate("LR",["#0066CC","#0066CC","#0066CC","#0066CC"]),o=new Candidate("LFI",["#C9462C","#C9462C","#C9462C","#C9462C"]),r=new Candidate("PS",["#ED1651","#ED1651","#ED1651","#ED1651"]);CandidateManager.candidates.RN=e,CandidateManager.candidates.LREM=a,CandidateManager.candidates["EÉLV"]=t,CandidateManager.candidates.LR=n,CandidateManager.candidates.LFI=o,CandidateManager.candidates.PS=r,LegendManager.toggleLegendLeans()}static loadPresetGermany(){var e=new Candidate("CDU/CSU",["#000000","#000000","#000000","#000000"]),a=new Candidate("SPD",["#F0001C","#F0001C","#F0001C","#F0001C"]),t=new Candidate("GRÜNE",["#46962B","#46962B","#46962B","#46962B"]),n=new Candidate("AfD",["#009EE0","#009EE0","#009EE0","#009EE0"]),o=new Candidate("FDP",["#dec200","#dec200","#dec200","#dec200"]),r=new Candidate("LINKE",["#BE3075","#BE3075","#BE3075","#BE3075"]);CandidateManager.candidates["CDU/CSU"]=e,CandidateManager.candidates.SPD=a,CandidateManager.candidates["GRÜNE"]=t,CandidateManager.candidates.AfD=n,CandidateManager.candidates.FDP=o,CandidateManager.candidates.LINKE=r,LegendManager.toggleLegendLeans()}static loadPresetItaly(){var e=new Candidate("Lega",["#008F21","#008F21","#008F21","#008F21"]),a=new Candidate("PD",["#FF3643","#FF3643","#FF3643","#FF3643"]),t=new Candidate("M5S",["#FFEB3B","#FFEB3B","#FFEB3B","#FFEB3B"]),n=new Candidate("FI",["#318CE7","#318CE7","#318CE7","#318CE7"]),o=new Candidate("FdI",["#003397","#003397","#003397","#003397"]),r=new Candidate("+Eu",["#FFD700","#FFD700","#FFD700","#FFD700"]);CandidateManager.candidates.Lega=e,CandidateManager.candidates.PD=a,CandidateManager.candidates.M5S=t,CandidateManager.candidates.FI=n,CandidateManager.candidates.FdI=o,CandidateManager.candidates["+EU"]=r,LegendManager.toggleLegendLeans()}static loadPresetUK(){var e=new Candidate("CON",["#0087DC","#0087DC","#0087DC","#0087DC"]),a=new Candidate("LAB",["#DC241f","#DC241f","#DC241f","#DC241f"]),t=new Candidate("LDM",["#FDBB30","#FDBB30","#FDBB30","#FDBB30"]),n=new Candidate("SNP",["#cccc00","#cccc00","#cccc00","#cccc00"]),o=new Candidate("GRN",["#6AB023","#6AB023","#6AB023","#6AB023"]),r=new Candidate("DUP",["#D46A4C","#D46A4C","#D46A4C","#D46A4C"]),s=new Candidate("SF",["#008800","#008800","#008800","#008800"]),d=new Candidate("PC",["#008142","#008142","#008142","#008142"]),i=new Candidate("SDLP",["#579c85","#579c85","#579c85","#579c85"]),l=new Candidate("ALL",["#EFCD53","#EFCD53","#EFCD53","#EFCD53"]),c=new Candidate("Ind",["#aaaaaa","#aaaaaa","#aaaaaa","#aaaaaa"]);CandidateManager.candidates.CON=e,CandidateManager.candidates.LAB=a,CandidateManager.candidates.LDM=t,CandidateManager.candidates.SNP=n,CandidateManager.candidates.GRN=o,CandidateManager.candidates.DUP=r,CandidateManager.candidates.SF=s,CandidateManager.candidates.PC=d,CandidateManager.candidates.SDLP=i,CandidateManager.candidates.ALL=l,CandidateManager.candidates.Ind=c,LegendManager.toggleLegendLeans()}static loadPresetCanada(){var e=new Candidate("CON",["#6495ED","#6495ED","#6495ED","#6495ED"]),a=new Candidate("LIB",["#F08080","#F08080","#F08080","#F08080"]),t=new Candidate("NDP",["#F4A460","#F4A460","#F4A460","#F4A460"]),n=new Candidate("GRN",["#9ACD32","#9ACD32","#9ACD32","#9ACD32"]),o=new Candidate("BQC",["#87CEFA","#87CEFA","#87CEFA","#87CEFA"]),r=new Candidate("PPC",["#83789E","#83789E","#83789E","#83789E"]);CandidateManager.candidates.CON=e,CandidateManager.candidates.LIB=a,CandidateManager.candidates.NDP=t,CandidateManager.candidates.GRN=n,CandidateManager.candidates.BQC=o,CandidateManager.candidates.PPC=r,LegendManager.toggleLegendLeans()}static loadPresetArgentina(){var e=new Candidate("Let's Change",["#ccae0b","#ccae0b","#ccae0b","#ccae0b"]),a=new Candidate("FPV",["#75aadb","#75aadb","#75aadb","#75aadb"]),t=new Candidate("Federal",["#19bc9d","#19bc9d","#19bc9d","#19bc9d"]),n=new Candidate("UNA",["#0a1172","#0a1172","#0a1172","#0a1172"]),o=new Candidate("RxA",["#00677f","#00677f","#00677f","#00677f"]),r=new Candidate("FCpS",["#ff0080","#ff0080","#ff0080","#ff0080"]),s=new Candidate("Unity",["#00774f","#00774f","#00774f","#00774f"]),d=new Candidate("Evolution",["#ff0000","#ff0000","#ff0000","#ff0000"]),i=new Candidate("FIT",["#800000","#800000","#800000","#800000"]),l=new Candidate("Catamarca",["#ff69b4","#ff69b4","#ff69b4","#ff69b4"]),c=new Candidate("Other",["#999999","#999999","#999999","#999999"]);CandidateManager.candidates["Let's Change"]=e,CandidateManager.candidates.FPV=a,CandidateManager.candidates.Federal=t,CandidateManager.candidates.UNA=n,CandidateManager.candidates.RxA=o,CandidateManager.candidates.FCpS=r,CandidateManager.candidates.Unity=s,CandidateManager.candidates.Evolution=d,CandidateManager.candidates.FIT=i,CandidateManager.candidates.Catamarca=l,CandidateManager.candidates.Other=c,LegendManager.toggleLegendLeans()}static loadPresetAustralia(){var e=new Candidate("LIB",["#0047AB","#0047AB","#0047AB","#0047AB"]),a=new Candidate("LNP",["#063C7C","#063C7C","#063C7C","#063C7C"]),t=new Candidate("NAT",["#006644","#006644","#006644","#006644"]),n=new Candidate("CLP",["#F8981D","#F8981D","#F8981D","#F8981D"]),o=new Candidate("IND",["#C0C0C0","#C0C0C0","#C0C0C0","#C0C0C0"]),r=new Candidate("CEN",["#ff6300","#ff6300","#ff6300","#ff6300"]),s=new Candidate("GRN",["#39B54A","#39B54A","#39B54A","#39B54A"]),d=new Candidate("LAB",["#DE3533","#DE3533","#DE3533","#DE3533"]);CandidateManager.candidates.LIB=e,CandidateManager.candidates.LNP=a,CandidateManager.candidates.NAT=t,CandidateManager.candidates.CLP=n,CandidateManager.candidates.IND=o,CandidateManager.candidates.CEN=r,CandidateManager.candidates.GRN=s,CandidateManager.candidates.LAB=d,LegendManager.toggleLegendLeans()}static loadPresetSpain(){var e=new Candidate("PSOE",["#EF1C27","#EF1C27","#EF1C27","#EF1C27"]),a=new Candidate("PP",["#1D84CE","#1D84CE","#1D84CE","#1D84CE"]),t=new Candidate("Vox",["#63BE21","#63BE21","#63BE21","#63BE21"]),n=new Candidate("Unidas Podemos",["#7B4977","#7B4977","#7B4977","#7B4977"]),o=new Candidate("Cs",["#EB6109","#EB6109","#EB6109","#EB6109"]),r=new Candidate("ERC-Sobiranistes",["#FFB232","#FFB232","#FFB232","#FFB232"]),s=new Candidate("Más País",["#0FDEC4","#0FDEC4","#0FDEC4","#0FDEC4"]),d=new Candidate("JxCat-Junts",["#ED5975","#ED5975","#ED5975","#ED5975"]),i=new Candidate("EAJ/PNV",["#4AAE4A","#4AAE4A","#4AAE4A","#4AAE4A"]),l=new Candidate("EH Bildu",["#B5CF18","#B5CF18","#B5CF18","#B5CF18"]),c=new Candidate("CUP-PR",["#FFED00","#FFED00","#FFED00","#FFED00"]),u=new Candidate("PACMA",["#ADBE18","#ADBE18","#ADBE18","#ADBE18"]),g=new Candidate("CCa-PNC-NC",["#FFD700","#FFD700","#FFD700","#FFD700"]),p=new Candidate("BNG",["#ADCFEF","#ADCFEF","#ADCFEF","#ADCFEF"]),C=new Candidate("NA+",["#999999","#999999","#999999","#999999"]),m=new Candidate("PRC",["#C2CE0C","#C2CE0C","#C2CE0C","#C2CE0C"]),h=new Candidate("¡Teruel Existe!",["#037252","#037252","#037252","#037252"]);CandidateManager.candidates.PSOE=e,CandidateManager.candidates.PP=a,CandidateManager.candidates.Vox=t,CandidateManager.candidates["Unidas Podemos"]=n,CandidateManager.candidates.Cs=o,CandidateManager.candidates["ERC-Sobiranistes"]=r,CandidateManager.candidates["JxCat-Junts"]=d,CandidateManager.candidates["Más País"]=s,CandidateManager.candidates["EAJ/PNV"]=i,CandidateManager.candidates["EH Bildu"]=l,CandidateManager.candidates["CCa-PNC-NC"]=g,CandidateManager.candidates.PRC=m,CandidateManager.candidates["CUP-PR"]=c,CandidateManager.candidates.PACMA=u,CandidateManager.candidates.BNG=p,CandidateManager.candidates["NA+"]=C,CandidateManager.candidates["¡Teruel Existe!"]=h,LegendManager.toggleLegendLeans()}static loadPresetTurkey(){var e=new Candidate("AKP",["#ffcc00","#ffcc00","#ffcc00","#ffcc00"]),a=new Candidate("MHP",["#870000","#870000","#870000","#870000"]),t=new Candidate("BBP",["#cc5252","#cc5252","#cc5252","#cc5252"]),n=new Candidate("CHP",["#e30000","#e30000","#e30000","#e30000"]),o=new Candidate("HDP",["#951b88","#951b88","#951b88","#951b88"]),r=new Candidate("IYI",["#0099cc","#0099cc","#0099cc","#0099cc"]),s=new Candidate("SP",["#ff5f5f","#ff5f5f","#ff5f5f","#ff5f5f"]),d=new Candidate("TIP",["#990000","#990000","#990000","#990000"]),i=new Candidate("DP",["#ff3333","#ff3333","#ff3333","#ff3333"]),l=new Candidate("Ind",["#b0b0b0","#b0b0b0","#b0b0b0","#b0b0b0"]);CandidateManager.candidates.AKP=e,CandidateManager.candidates.MHP=a,CandidateManager.candidates.BBP=t,CandidateManager.candidates.CHP=n,CandidateManager.candidates.HDP=o,CandidateManager.candidates.IYI=r,CandidateManager.candidates.SP=s,CandidateManager.candidates.TIP=d,CandidateManager.candidates.DP=i,CandidateManager.candidates.Ind=l,LegendManager.toggleLegendLeans()}static loadPresetTrinidadTobago(){var e=new Candidate("PNM",["#ff0000","#ff0000","#ff0000","#ff0000"]),a=new Candidate("UNC",["#e8ac41","#e8ac41","#e8ac41","#e8ac41"]),t=new Candidate("COP",["#000000","#000000","#000000","#000000"]),n=new Candidate("PDP",["#32cd32","#32cd32","#32cd32","#32cd32"]);CandidateManager.candidates.PNM=e,CandidateManager.candidates.UNC=a,CandidateManager.candidates.COP=t,CandidateManager.candidates.PDP=n,LegendManager.toggleLegendLeans()}static loadPresetNetherlands(){var e=new Candidate("FvD",["#841818","#841818","#841818","#841818"]),a=new Candidate("VVD",["#21276A","#21276A","#21276A","#21276A"]),t=new Candidate("CDA",["#007C5E","#007C5E","#007C5E","#007C5E"]),n=new Candidate("GL",["#83BD00","#83BD00","#83BD00","#83BD00"]),o=new Candidate("PvdA",["#E12B1A","#E12B1A","#E12B1A","#E12B1A"]),r=new Candidate("D66",["#00B13D","#00B13D","#00B13D","#00B13D"]),s=new Candidate("PVV",["#21468B","#21468B","#21468B","#21468B"]),d=new Candidate("SP",["#EE161F","#EE161F","#EE161F","#EE161F"]),i=new Candidate("CU",["#00A7EB","#00A7EB","#00A7EB","#00A7EB"]),l=new Candidate("PvdD",["#006B28","#006B28","#006B28","#006B28"]),c=new Candidate("50+",["#932390","#932390","#932390","#932390"]),u=(new Candidate("SGP",["#E95D0F","#E95D0F","#E95D0F","#E95D0F"]),new Candidate("DENK",["#00A7EB","#00A7EB","#00A7EB","#00A7EB"]));CandidateManager.candidates.FvD=e,CandidateManager.candidates.VVD=a,CandidateManager.candidates.CDA=t,CandidateManager.candidates.GL=n,CandidateManager.candidates.PvdA=o,CandidateManager.candidates.D66=r,CandidateManager.candidates.PVV=s,CandidateManager.candidates.SP=d,CandidateManager.candidates.CU=i,CandidateManager.candidates.PvdD=l,CandidateManager.candidates["50+"]=c,CandidateManager.candidates.DENK=u,LegendManager.toggleLegendLeans()}static loadPresetBrazil(){var e=new Candidate("PSL",["#203B78","#203B78","#203B78","#203B78"]),a=new Candidate("PP",["#7DC9FF","#7DC9FF","#7DC9FF","#7DC9FF"]),t=new Candidate("PL",["#0F0073","#0F0073","#0F0073","#0F0073"]),n=new Candidate("PSD",["#FFA500","#FFA500","#FFA500","#FFA500"]),o=new Candidate("MDB",["#30914D","#30914D","#30914D","#30914D"]),r=new Candidate("PRB",["#00E6A8","#00E6A8","#00E6A8","#00E6A8"]),s=new Candidate("PSDB",["#0080FF","#0080FF","#0080FF","#0080FF"]);new Candidate("DEM",["#8CC63E","#8CC63E","#8CC63E","#8CC63E"]),new Candidate("SD",["#FF9C2B","#FF9C2B","#FF9C2B","#FF9C2B"]),new Candidate("PODE",["#2DA933","#2DA933","#2DA933","#2DA933"]),new Candidate("PTB",["#7B7B7B","#7B7B7B","#7B7B7B","#7B7B7B"]),new Candidate("PSC",["#009118","#009118","#009118","#009118"]),new Candidate("NOVO",["#FF4D00","#FF4D00","#FF4D00","#FF4D00"]),new Candidate("PATRI",["#CCAA00","#CCAA00","#CCAA00","#CCAA00"]);CandidateManager.candidates.PSL=e,CandidateManager.candidates.PP=a,CandidateManager.candidates.PL=t,CandidateManager.candidates.PSD=n,CandidateManager.candidates.MDB=o,CandidateManager.candidates.PRB=r,CandidateManager.candidates.PSDB=s;n=new Candidate("PT",["#CC0000","#CC0000","#CC0000","#CC0000"]),o=new Candidate("PSB",["#FFCC00","#FFCC00","#FFCC00","#FFCC00"]),r=new Candidate("PDT",["#FF0000","#FF0000","#FF0000","#FF0000"]),s=new Candidate("PSOL",["#700000","#700000","#700000","#700000"]),new Candidate("PCdoB",["#A30000","#A30000","#A30000","#A30000"]),new Candidate("CIDADANIA",["#FF9191","#FF9191","#FF9191","#FF9191"]),new Candidate("PMN",["#DD3333","#DD3333","#DD3333","#DD3333"]),new Candidate("REDE",["#00C2BB","#00C2BB","#00C2BB","#00C2BB"]);CandidateManager.candidates.PT=n,CandidateManager.candidates.PSB=o,CandidateManager.candidates.PDT=r,CandidateManager.candidates.PSOL=s;r=new Candidate("PROS",["#FF5460","#FF5460","#FF5460","#FF5460"]),s=new Candidate("AVANTE",["#ED5F36","#ED5F36","#ED5F36","#ED5F36"]);CandidateManager.candidates.PROS=r,CandidateManager.candidates.AVANTE=s,LegendManager.toggleLegendLeans()}static loadPresetIreland(){var e=new Candidate("FG",["#6699FF","#6699FF","#6699FF","#6699FF"]),a=new Candidate("FF",["#66BB66","#66BB66","#66BB66","#66BB66"]),t=new Candidate("SF",["#326760","#326760","#326760","#326760"]),n=new Candidate("Lab",["#CC0000","#CC0000","#CC0000","#CC0000"]),o=new Candidate("S-PBP",["#E5E500","#E5E500","#E5E500","#E5E500"]),r=new Candidate("I4C",["#FFC0CB","#FFC0CB","#FFC0CB","#FFC0CB"]),s=new Candidate("SD",["#752F8B","#752F8B","#752F8B","#752F8B"]),d=new Candidate("GP",["#99CC33","#99CC33","#99CC33","#99CC33"]),i=new Candidate("Ind",["#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC"]);CandidateManager.candidates.FG=e,CandidateManager.candidates.FF=a,CandidateManager.candidates.SF=t,CandidateManager.candidates.Lab=n,CandidateManager.candidates["S-PBP"]=o,CandidateManager.candidates.I4C=r,CandidateManager.candidates.SD=s,CandidateManager.candidates.GP=d,CandidateManager.candidates.Ind=i,LegendManager.toggleLegendLeans()}static loadPresetRussia(){var e=new Candidate("ER",["#0C2C84","#0C2C84","#0C2C84","#0C2C84"]),a=new Candidate("LDPR",["#2862B3","#2862B3","#2862B3","#2862B3"]),t=new Candidate("CPRF",["#D70000","#D70000","#D70000","#D70000"]),n=new Candidate("Patriots",["#F6DF3B","#F6DF3B","#F6DF3B","#F6DF3B"]),o=new Candidate("CP",["#FAB512","#FAB512","#FAB512","#FAB512"]),r=new Candidate("Rodina",["#EA484A","#EA484A","#EA484A","#EA484A"]),s=new Candidate("Yabloko",["#00A800","#00A800","#00A800","#00A800"]),d=new Candidate("Ind",["#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC"]);CandidateManager.candidates.ER=e,CandidateManager.candidates.LDPR=a,CandidateManager.candidates.CPRF=t,CandidateManager.candidates.Patriots=n,CandidateManager.candidates.CP=o,CandidateManager.candidates.Rodina=r,CandidateManager.candidates.Yabloko=s,CandidateManager.candidates.Ind=d,LegendManager.toggleLegendLeans()}static loadPresetPortugal(){var e=new Candidate("PS",["#ff61ea","#ff61ea","#ff61ea","#ff61ea"]),a=new Candidate("Ind",["#aaaaaa","#aaaaaa","#aaaaaa","#aaaaaa"]),t=new Candidate("BE",["#870909","#870909","#870909","#870909"]),n=new Candidate("PCP",["#ff0000","#ff0000","#ff0000","#ff0000"]),o=new Candidate("PEV",["#008000","#008000","#008000","#008000"]),r=new Candidate("PPD/PSD",["#ff9900","#ff9900","#ff9900","#ff9900"]),s=new Candidate("CDS-PP",["#00daff","#00daff","#00daff","#00daff"]),d=new Candidate("PAN",["#008080","#008080","#008080","#008080"]);CandidateManager.candidates.PS=e,CandidateManager.candidates.BE=t,CandidateManager.candidates.PCP=n,CandidateManager.candidates.PEV=o,CandidateManager.candidates["PPD/PSD"]=r,CandidateManager.candidates["CDS-PP"]=s,CandidateManager.candidates.PAN=d,CandidateManager.candidates.Ind=a,LegendManager.toggleLegendLeans()}static loadPresetSouthAfrica(){var e=new Candidate("ANC",["#006600","#006600","#006600","#006600"]),a=new Candidate("DA",["#005ba6","#005ba6","#005ba6","#005ba6"]),t=new Candidate("EFF",["#852a2a","#852a2a","#852a2a","#852a2a"]),n=new Candidate("IFP",["#ff0000","#ff0000","#ff0000","#ff0000"]),o=new Candidate("FF+",["#ec8713","#ec8713","#ec8713","#ec8713"]),r=new Candidate("ACDP",["#ba0c2f","#ba0c2f","#ba0c2f","#ba0c2f"]),s=new Candidate("UDM",["#ffde01","#ffde01","#ffde01","#ffde01"]),d=new Candidate("ATM",["#00adee","#00adee","#00adee","#00adee"]),i=new Candidate("Good",["#f36900","#f36900","#f36900","#f36900"]),l=new Candidate("NFP",["#ff8040","#ff8040","#ff8040","#ff8040"]),c=new Candidate("AIC",["#ffb543","#ffb543","#ffb543","#ffb543"]),u=new Candidate("COPE",["#ffca08","#ffca08","#ffca08","#ffca08"]),g=new Candidate("PAC",["#008718","#008718","#008718","#008718"]),p=new Candidate("ALJ",["#1c9069","#1c9069","#1c9069","#1c9069"]);CandidateManager.candidates.ANC=e,CandidateManager.candidates.DA=a,CandidateManager.candidates.EFF=t,CandidateManager.candidates.IFP=n,CandidateManager.candidates["FF+"]=o,CandidateManager.candidates.ACDP=r,CandidateManager.candidates.UDM=s,CandidateManager.candidates.ATM=d,CandidateManager.candidates.Good=i,CandidateManager.candidates.NFP=l,CandidateManager.candidates.AIC=c,CandidateManager.candidates.COPE=u,CandidateManager.candidates.PAC=g,CandidateManager.candidates.ALJ=p,LegendManager.toggleLegendLeans()}static loadPresetIndia(){var e=new Candidate("BJP",["#ff9933","#ff9933","#ff9933","#ff9933"]),a=new Candidate("YSRCP",["#1569c7","#1569c7","#1569c7","#1569c7"]),t=new Candidate("SS",["#ff6634","#ff6634","#ff6634","#ff6634"]),n=new Candidate("JD",["#004285","#004285","#004285","#004285"]),o=new Candidate("BJD",["#006400","#006400","#006400","#006400"]),r=new Candidate("BSP",["#0000ff","#0000ff","#0000ff","#0000ff"]),s=new Candidate("TRS",["#ff89ce","#ff89ce","#ff89ce","#ff89ce"]),d=new Candidate("LJP",["#40ff7e","#40ff7e","#40ff7e","#40ff7e"]),i=new Candidate("INC",["#00bfff","#00bfff","#00bfff","#00bfff"]),l=new Candidate("DMK",["#de1100","#de1100","#de1100","#de1100"]),c=new Candidate("NCP",["#008080","#008080","#008080","#008080"]),u=new Candidate("AITC",["#00f200","#00f200","#00f200","#00f200"]),g=new Candidate("SP",["#a30000","#a30000","#a30000","#a30000"]);CandidateManager.candidates.BJP=e,CandidateManager.candidates.YSRCP=a,CandidateManager.candidates.SS=t,CandidateManager.candidates.JD=n,CandidateManager.candidates.BJD=o,CandidateManager.candidates.BSP=r,CandidateManager.candidates.TRS=s,CandidateManager.candidates.LJP=d,CandidateManager.candidates.INC=i,CandidateManager.candidates.DMK=l,CandidateManager.candidates.NCP=c,CandidateManager.candidates.AITC=u,CandidateManager.candidates.SP=g,LegendManager.toggleLegendLeans()}static loadPresetSweden(){var e=new Candidate("SAP",["#ed1231","#ed1231","#ed1231","#ed1231"]),a=new Candidate("MP",["#2b912b","#2b912b","#2b912b","#2b912b"]),t=new Candidate("C",["#216c3e","#216c3e","#216c3e","#216c3e"]),n=new Candidate("L",["#006ab5","#006ab5","#006ab5","#006ab5"]),o=new Candidate("V",["#ec121e","#ec121e","#ec121e","#ec121e"]),r=new Candidate("M",["#019cdb","#019cdb","#019cdb","#019cdb"]),s=new Candidate("SD",["#fedf09","#fedf09","#fedf09","#fedf09"]),d=new Candidate("KD",["#005ea3","#005ea3","#005ea3","#005ea3"]),i=new Candidate("Ind",["#999999","#999999","#999999","#999999"]);CandidateManager.candidates.SAP=e,CandidateManager.candidates.MP=a,CandidateManager.candidates.C=t,CandidateManager.candidates.L=n,CandidateManager.candidates.V=o,CandidateManager.candidates.M=r,CandidateManager.candidates.SD=s,CandidateManager.candidates.KD=d,CandidateManager.candidates.Ind=i,LegendManager.toggleLegendLeans()}static loadPresetSwitzerland(){var e=new Candidate("SVP/UDC",["#088a4b","#088a4b","#088a4b","#088a4b"]),a=new Candidate("FDP/PLR",["#0e52a0","#0e52a0","#0e52a0","#0e52a0"]),t=new Candidate("SDP/PSS",["#FA1360","#FA1360","#FA1360","#FA1360"]),n=new Candidate("GPS/PES",["#01df01","#01df01","#01df01","#01df01"]),o=new Candidate("CVP/PDC",["#ef7d00","#ef7d00","#ef7d00","#ef7d00"]),r=new Candidate("GLP/PVL",["#a6cf42","#a6cf42","#a6cf42","#a6cf42"]),s=new Candidate("BDP/PBD",["#000000","#000000","#000000","#000000"]),d=new Candidate("EVP/PEV",["#ffd735","#ffd735","#ffd735","#ffd735"]),i=new Candidate("LdT",["#6495ed","#6495ed","#6495ed","#6495ed"]),l=new Candidate("PdA/PST",["#FF0000","#FF0000","#FF0000","#FF0000"]),c=new Candidate("SolS",["#ababab","#ababab","#ababab","#ababab"]),u=new Candidate("EDU/UDF",["#9b2a58","#9b2a58","#9b2a58","#9b2a58"]);CandidateManager.candidates["SVP/UDC"]=e,CandidateManager.candidates["FDP/PLR"]=a,CandidateManager.candidates["SP/PS"]=t,CandidateManager.candidates["GPS/PES"]=n,CandidateManager.candidates["CVP/PDC"]=o,CandidateManager.candidates["GLP/PVL"]=r,CandidateManager.candidates["BDP/PBD"]=s,CandidateManager.candidates["EVP/PEV"]=d,CandidateManager.candidates["PdA/PST"]=l,CandidateManager.candidates.SolS=c,CandidateManager.candidates["EDU/UDF"]=u,CandidateManager.candidates.LdT=i,LegendManager.toggleLegendLeans()}static loadPresetPakistan(){var e=new Candidate("PTI",["#ff0f0f","#ff0f0f","#ff0f0f","#ff0f0f"]),a=new Candidate("MQM-P",["#8f0303","#8f0303","#8f0303","#8f0303"]),t=new Candidate("PML-Q",["#00800d","#00800d","#00800d","#00800d"]),n=new Candidate("BAP",["#9eee58","#9eee58","#9eee58","#9eee58"]),o=new Candidate("GDA",["#769c1e","#769c1e","#769c1e","#769c1e"]),r=new Candidate("AML",["#4aee31","#4aee31","#4aee31","#4aee31"]),s=new Candidate("JWP",["#d984e3","#d984e3","#d984e3","#d984e3"]),d=new Candidate("BNP-M",["#eee600","#eee600","#eee600","#eee600"]),i=new Candidate("PML-N",["#228000","#228000","#228000","#228000"]),l=new Candidate("PPP",["#000000","#000000","#000000","#000000"]),c=new Candidate("MMA",["#004c00","#004c00","#004c00","#004c00"]),u=new Candidate("ANP",["#ff0800","#ff0800","#ff0800","#ff0800"]),g=new Candidate("Ind",["#afafaf","#afafaf","#afafaf","#afafaf"]);CandidateManager.candidates.PTI=e,CandidateManager.candidates["MQM-P"]=a,CandidateManager.candidates["PML-Q"]=t,CandidateManager.candidates.BAP=n,CandidateManager.candidates.GDA=o,CandidateManager.candidates.AML=r,CandidateManager.candidates.JWP=s,CandidateManager.candidates["BNP-M"]=d,CandidateManager.candidates["PML-N"]=i,CandidateManager.candidates.PPP=l,CandidateManager.candidates.MMA=c,CandidateManager.candidates.ANP=u,CandidateManager.candidates.Ind=g,LegendManager.toggleLegendLeans()}static loadPresetEU(){var e=new Candidate("EPP",["#3399FF","#3399FF","#3399FF","#3399FF"]),a=new Candidate("PES",["#F0001C","#F0001C","#F0001C","#F0001C"]),t=new Candidate("ALDE",["#FFD700","#FFD700","#FFD700","#FFD700"]),n=new Candidate("EGP",["#99CC33","#99CC33","#99CC33","#99CC33"]),o=new Candidate("ECRP",["#0054A5","#0054A5","#0054A5","#0054A5"]),r=new Candidate("IDP",["#26428B","#26428B","#26428B","#26428B"]),s=new Candidate("PEL",["#800000","#800000","#800000","#800000"]),d=new Candidate("EFA",["#662287","#662287","#662287","#662287"]),i=new Candidate("EDP",["#EE9900","#EE9900","#EE9900","#EE9900"]),l=new Candidate("ECPM",["#0BAE2C","#0BAE2C","#0BAE2C","#0BAE2C"]),c=new Candidate("NI",["#C0C0C0","#C0C0C0","#C0C0C0","#C0C0C0"]);CandidateManager.candidates.EPP=e,CandidateManager.candidates.PES=a,CandidateManager.candidates.ALDE=t,CandidateManager.candidates.EGP=n,CandidateManager.candidates.ECRP=o,CandidateManager.candidates.IDP=r,CandidateManager.candidates.PEL=s,CandidateManager.candidates.EFA=d,CandidateManager.candidates.EDP=i,CandidateManager.candidates.ECPM=l,CandidateManager.candidates.NI=c,LegendManager.toggleLegendLeans()}}var totalVotes=0,stateCount=0;class State{constructor(e,a,t){this.name=e,this.fakename="District "+ ++stateCount,this.colorValue=2,this.htmlElement=a,this.candidate="Tossup",this.dataid=t,this.voteCount=0,this.voteCount_beforeDisable=0,this.resetVoteCount(),this.disabled=!1,this.locked=!1,this.onChange=function(){}}resetVoteCount(){var e;parseInt(this.dataid)?(e=parseInt(this.dataid),this.setVoteCount(e),this.voteCount_beforeDisable=e):"duma"===this.dataid?"Russia"===this.name?(this.setVoteCount(225),this.voteCount_beforeDisable=225):(this.setVoteCount(1),this.voteCount_beforeDisable=1):"congressional"===this.dataid||"usa_gubernatorial"===this.dataid||"gubernatorial"===this.dataid?(this.setVoteCount(1),this.voteCount_beforeDisable=1):"senate"===this.dataid?(this.setVoteCount(2),this.voteCount_beforeDisable=2):(this.setVoteCount(GlobalData[this.dataid][this.name]),this.voteCount_beforeDisable=GlobalData[this.dataid][this.name])}resetDelegates(){!0!==this.disabled&&(this.delegates={},this.delegates.Tossup=this.voteCount,this.setColor("Tossup",2,{setDelegates:!1}))}setDelegates(e,a){this.delegates[e]=a;var t="Tossup",n=0,o=2;for(e in this.delegates){var r=this.delegates[e];n<r?"Tossup"!==e&&(t=e,n=r,o=0):r===n&&(t="Tossup",o=2)}this.setColor(t,o,{setDelegates:!1})}setVoteCount(e){var a=e-this.voteCount;this.voteCount=e,this.delegates={},this.setDelegates("Tossup",e),"proportional"===MapLoader.save_type&&(this.candidate="Tossup",this.setColor("Tossup",2)),totalVotes+=a;const t=document.getElementById(this.name+"-text");null===t||"usa_ec"!==MapLoader.save_dataid&&"usa_1972_ec"!==MapLoader.save_dataid&&"usa_no_districts_ec"!==MapLoader.save_dataid&&"usa_pre_civilwar_ec"!==MapLoader.save_dataid&&"usa_territories_ec"!==MapLoader.save_dataid&&"usa_2024_ec"!==MapLoader.save_dataid||(this.name,void 0!==t.childNodes[1]?t.childNodes[1].innerHTML=" "+e:t.childNodes[0].innerHTML=this.name+" "+e)}getHtml(){return this.htmlElement}getDisplayColor(){return this.htmlElement.style.fill}setDisplayColor(e){this.htmlElement.style.fill=e;var a=document.getElementById(this.name+"-button");null!==a&&(a.style.fill=e);a=document.getElementById(this.name+"-land");null!==a&&(a.style.fill=e)}verifyTossupColor(){"Tossup"===this.candidate&&this.setDisplayColor(CandidateManager.TOSSUP.colors[2])}toggleLock(){var e,a,t;0==this.locked?(this.disabled=!0,this.locked=!this.locked,this.name.includes("-S")&&(this.htmlElement.style.visibility="hidden"),this.setDisplayColor(CandidateManager.TOSSUP.colors[2]),this.htmlElement.setAttribute("fill-opacity","0.2"),this.htmlElement.setAttribute("stroke-opacity","0.2"),null!==(e=document.getElementById(this.name+"-text"))&&e.setAttribute("fill-opacity","0.2"),null!==(a=document.getElementById(this.name+"-land"))&&(a.setAttribute("fill-opacity","0.2"),a.setAttribute("stroke-opacity","0.2")),null!==(t=document.getElementById(this.name+"-button"))&&(t.setAttribute("fill-opacity","0.2"),t.setAttribute("stroke-opacity","0.2"))):1==this.locked&&(this.disabled=!1,this.locked=!this.locked,this.setColor(this.candidate,this.colorValue),this.htmlElement.setAttribute("fill-opacity","1.0"),this.htmlElement.setAttribute("stroke-opacity","1.0"),this.name.includes("-S")&&(this.htmlElement.style.visibility="visible"),null!==(e=document.getElementById(this.name+"-text"))&&e.setAttribute("fill-opacity","1.0"),null!=(a=document.getElementById(this.name+"-land"))&&(a.setAttribute("fill-opacity","1.0"),a.setAttribute("stroke-opacity","1.0")),null!==(t=document.getElementById(this.name+"-button"))&&(t.setAttribute("fill-opacity","1.0"),t.setAttribute("stroke-opacity","1.0")))}toggleDisable(){var e,a,t,n;1!=this.locked&&(0==this.disabled?(this.setVoteCount(0),this.setColor("Tossup",2),this.disabled=!this.disabled,this.htmlElement.setAttribute("fill-opacity","0.25"),this.htmlElement.setAttribute("stroke-opacity","0.25"),this.name.includes("-S"),"senatorial"!==MapLoader.save_type&&null!==(e=document.getElementById(this.name+"-text"))&&e.setAttribute("fill-opacity","0.25"),null!==(a=document.getElementById(this.name+"-land"))&&(a.setAttribute("fill-opacity","0.25"),a.setAttribute("stroke-opacity","0.25")),null!==(t=document.getElementById(this.name+"-button"))&&(t.setAttribute("fill-opacity","0.25"),t.setAttribute("stroke-opacity","0.25")),"senatorial"!==MapLoader.save_type&&null!==(n=document.getElementById(this.name.split("-")[0]+"-text"))&&n.setAttribute("fill-opacity","0.25")):1==this.disabled&&(this.resetVoteCount(),this.setVoteCount(this.voteCount),this.disabled=!this.disabled,this.setColor(this.candidate,this.colorValue),this.htmlElement.setAttribute("fill-opacity","1.0"),this.htmlElement.setAttribute("stroke-opacity","1.0"),this.name.includes("-S")&&(this.htmlElement.style.visibility="visible"),null!==(e=document.getElementById(this.name+"-text"))&&e.setAttribute("fill-opacity","1.0"),null!=(a=document.getElementById(this.name+"-land"))&&(a.setAttribute("fill-opacity","1.0"),a.setAttribute("stroke-opacity","1.0")),null!==(t=document.getElementById(this.name+"-button"))&&(t.setAttribute("fill-opacity","1.0"),t.setAttribute("stroke-opacity","1.0")),null!==(n=document.getElementById(this.name.split("-")[0]+"-text"))&&n.setAttribute("fill-opacity","1.0")))}incrementCandidateColor(e,a={setDelegates:!0}){this.disabled||(this.candidate!==e?this.colorValue=0:this.colorValue+=1,a.setDelegates&&(this.delegates={},this.delegates.Tossup=0,this.delegates[e]=this.voteCount),"Tossup"===this.candidate?3<=this.colorValue&&(this.colorValue=0):(this.colorValue>=maxColorValues&&(this.colorValue=0),CandidateManager.candidates[e].singleColor&&(this.colorValue=0)),this.candidate=e,"Tossup"===this.candidate&&(this.colorValue=CandidateManager.tossupColor),a=CandidateManager.TOSSUP.colors[CandidateManager.tossupColor],this.candidate in CandidateManager.candidates&&void 0!==CandidateManager.candidates[this.candidate].colors&&null!==CandidateManager.candidates[this.candidate].colors&&(a=CandidateManager.candidates[this.candidate].colors[this.colorValue],this.htmlElement.style.fill=a),null!=(e=document.getElementById(this.name+"-land"))&&(e.style.fill=a),null!=(e=document.getElementById(this.name+"-button"))&&(e.style.fill=a),this.onChange&&this.onChange())}highlight(){this.disabled||(this.highlight=!this.highlight,this.htmlElement.style.stroke="#ffff00",""===this.htmlElement.style.strokeWidth&&(this.htmlElement.style.strokeWidth="1px"),this.htmlElement.style.strokeWidth=new String(3*parseInt(this.htmlElement.style.strokeWidth.slice(0,-2)))+"px")}setColor(e,a,t={setDelegates:!0}){this.disabled||("Tossup"===(this.candidate=e)&&0==a&&(a=2),t.setDelegates&&(this.delegates={},this.delegates.Tossup=0,this.delegates[e]=this.voteCount),this.colorValue=a,t=null,(t=CandidateManager.candidates[e]?CandidateManager.candidates[e].colors[a]:t)&&(this.htmlElement.style.fill=t,this.htmlElement.setAttribute("fill","url(#"+this.name+"_pattern)"),null!=(a=document.getElementById(this.name+"-land"))&&(a.style.fill=t,a.setAttribute("fill","url(#"+this.name+"_pattern)")),null!=(a=document.getElementById(this.name+"-button"))&&(a.style.fill=t,a.setAttribute("fill","url(#"+this.name+"_pattern)"))),this.onChange&&this.onChange())}test_setColor(e){console.log("TEST SET COLOR");var a=document.getElementById("svgdata").firstChild,t=a.querySelector("#defs");null===t&&((t=document.createElementNS("http://www.w3.org/2000/svg","defs")).setAttribute("id","defs"),a.insertBefore(t,a.firstChild));var n=a.querySelector("#"+this.name+"_pattern");for(null===n&&((n=document.createElementNS("http://www.w3.org/2000/svg","pattern")).setAttribute("id",this.name+"_pattern"),n.setAttribute("width","30"),n.setAttribute("height","30"),n.setAttribute("patternUnits","userSpaceOnUse"),n.setAttribute("patternTransform","rotate(-35)"),t.appendChild(n));n.firstChild;)n.removeChild(n.lastChild);for(var o=Object.keys(this.delegates),r=o.length,s=0,d=0;d<r;++d){var i=CandidateManager.candidates[o[d]].name;this.delegates[o[d]]&&"Tossup"!==i&&(s+=1)}for(var l=0,d=0;d<r;++d){var c,u=CandidateManager.candidates[o[d]].colors[0],i=CandidateManager.candidates[o[d]].name,g=this.delegates[o[d]];this.delegates[o[d]]&&"Tossup"!==i&&(c=document.createElementNS("http://www.w3.org/2000/svg","rect"),console.log(u),c.setAttribute("class",i),c.setAttribute("fill",u),c.setAttribute("width",(g/this.voteCount*30).toString()),c.setAttribute("height","100%"),c.setAttribute("x",l.toString()),l+=30/s,c.setAttribute("y","0"),n.appendChild(c))}this.htmlElement.removeAttribute("style")}static setEC(){closeAllPopups();for(var e=document.getElementById("state-id").value,a=document.getElementById("state-ec").value,t=0,n=states.length;t<n;++t){var o=states[t];if(o.name===e){o.setVoteCount(parseInt(a));break}}countVotes(),ChartManager.updateChart(),LegendManager.updateLegend()}}function updateBattleChart(){if(3<Object.keys(CandidateManager.candidates).length)mobile?ChartManager.setChart("pie","bottom"):ChartManager.setChart("pie");else{var e=document.getElementById("tossupbar"),a=document.getElementById("topbar"),t=document.getElementById("topbar-safe"),n=document.getElementById("topbar-solid"),o=document.getElementById("topbar-likely"),r=document.getElementById("topbar-lean"),s=document.getElementById("topbar-tilt"),d=document.getElementById("bottombar"),i=document.getElementById("bottombar-safe"),l=document.getElementById("bottombar-solid"),c=document.getElementById("bottombar-likely"),u=document.getElementById("bottombar-lean"),g=document.getElementById("bottombar-tilt");a.style.flexBasis="",d.style.flexBasis="";var p,C=-1;for(p in CandidateManager.candidates){++C;var m=CandidateManager.candidates[p];0==C?(e.style.background=m.colors[2],e.style.flexBasis=m.voteCount/totalVotes*100+"%",ChartManager.chartLabels?e.innerHTML="<p>"+m.voteCount+"</p>":e.innerHTML="<p></p>"):1==C?(a.style.flexBasis=m.voteCount/totalVotes*100+"%",ChartManager.chartLeans?(t.style.flexBasis=m.probVoteCounts[0]/m.voteCount*100+"%",t.style.background=m.colors[0],n.style.flexBasis=m.probVoteCounts[1]/m.voteCount*100+"%",n.style.background=m.colors[1],o.style.flexBasis=m.probVoteCounts[2]/m.voteCount*100+"%",o.style.background=m.colors[2],r.style.flexBasis=m.probVoteCounts[3]/m.voteCount*100+"%",r.style.background=m.colors[3],s.style.flexBasis=m.probVoteCounts[4]/m.voteCount*100+"%",s.style.background=m.colors[4],ChartManager.chartLabels?(t.innerHTML="<p>"+m.probVoteCounts[0]+"</p>",n.innerHTML="<p>"+m.probVoteCounts[1]+"</p>",o.innerHTML="<p>"+m.probVoteCounts[2]+"</p>",r.innerHTML="<p>"+m.probVoteCounts[3]+"</p>",s.innerHTML="<p>"+m.probVoteCounts[4]+"</p>"):(t.innerHTML="<p></p>",n.innerHTML="<p></p>",o.innerHTML="<p></p>",r.innerHTML="<p></p>",s.innerHTML="<p></p>")):(t.style.flexBasis="100%",t.style.background=m.colors[0],n.style.flexBasis="0%",n.style.background=m.colors[1],o.style.flexBasis="0%",o.style.background=m.colors[2],r.style.flexBasis="0%",r.style.background=m.colors[3],s.style.flexBasis="0%",s.style.background=m.colors[4],ChartManager.chartLabels?t.innerHTML="<p>"+(m.probVoteCounts[0]+m.probVoteCounts[1]+m.probVoteCounts[2]+m.probVoteCounts[3]+m.probVoteCounts[4])+"</p>":t.innerHTML="<p></p>",n.innerHTML="<p></p>",o.innerHTML="<p></p>",r.innerHTML="<p></p>",s.innerHTML="<p></p>")):2==C&&(d.style.flexBasis=m.voteCount/totalVotes*100+"%",ChartManager.chartLeans?(i.style.flexBasis=m.probVoteCounts[0]/m.voteCount*100+"%",i.style.background=m.colors[0],l.style.flexBasis=m.probVoteCounts[1]/m.voteCount*100+"%",l.style.background=m.colors[1],c.style.flexBasis=m.probVoteCounts[2]/m.voteCount*100+"%",c.style.background=m.colors[2],u.style.flexBasis=m.probVoteCounts[3]/m.voteCount*100+"%",u.style.background=m.colors[3],g.style.flexBasis=m.probVoteCounts[4]/m.voteCount*100+"%",g.style.background=m.colors[4],ChartManager.chartLabels?(i.innerHTML="<p>"+m.probVoteCounts[0]+"</p>",l.innerHTML="<p>"+m.probVoteCounts[1]+"</p>",c.innerHTML="<p>"+m.probVoteCounts[2]+"</p>",u.innerHTML="<p>"+m.probVoteCounts[3]+"</p>",g.innerHTML="<p>"+m.probVoteCounts[4]+"</p>"):(i.innerHTML="<p></p>",l.innerHTML="<p></p>",c.innerHTML="<p></p>",u.innerHTML="<p></p>",g.innerHTML="<p></p>")):(i.style.flexBasis="100%",i.style.background=m.colors[0],l.style.flexBasis="0%",l.style.background=m.colors[1],c.style.flexBasis="0%",c.style.background=m.colors[2],u.style.flexBasis="0%",u.style.background=m.colors[3],g.style.flexBasis="0%",g.style.background=m.colors[4],ChartManager.chartLabels?i.innerHTML="<p>"+(m.probVoteCounts[0]+m.probVoteCounts[1]+m.probVoteCounts[2]+m.probVoteCounts[3]+m.probVoteCounts[4])+"</p>":i.innerHTML="<p></p>",l.innerHTML="<p></p>",c.innerHTML="<p></p>",u.innerHTML="<p></p>",g.innerHTML="<p></p>"))}}}function buttonClick(e){var a;!1!==php_candidate_edit&&(a=e.getAttribute("id").split("-")[0],e=states.find(e=>e.name===a),"paint"===mode||"fill"===mode?stateClickPaint(e):"ec"===mode?stateClickEC(e):"delete"===mode?stateClickDelete(e):"highlight"===mode&&stateClickHighlight(e),countVotes(),ChartManager.updateChart(),LegendManager.updateLegend())}function landClick(e){var a,t,n,o;!1!==php_candidate_edit&&"move"!==mode&&(a=KeyboardManager.quickFill(),e=e.getAttribute("id").split("-"),t=e[0],e[1],o=[],states.forEach(function(e,a){e.name.includes(t)&&(o.push(e),e.name.includes("AL")&&(n=e))}),"paint"===mode||"fill"===mode?(Simulator.view(n),a?n.setColor(paintIndex,0):n.incrementCandidateColor(paintIndex),o.forEach(function(e){e.setColor(n.candidate,n.colorValue)})):"delete"===mode&&o.forEach(function(e){e.toggleDisable()}),countVotes(),ChartManager.updateChart(),LegendManager.updateLegend())}function stateClick(e){if(!1!==php_candidate_edit){var a=e.getAttribute("id"),t=states.find(e=>e.name===a);switch(mode){case"paint":case"fill":Simulator.view(t),!1===Simulator.ignoreClick&&stateClickPaint(t);break;case"ec":stateClickEC(t);break;case"delete":stateClickDelete(t);break;case"highlight":stateClickHighlight(t)}countVotes(),ChartManager.updateChart(),LegendManager.updateLegend()}}var tooltipTimeout=null;function stateClickPaint(e,a={forceProportional:!1}){if(!e.disabled)if(a.forceProportional)displayProportionalEdit(e);else if("proportional"===MapLoader.save_type){if("proportional"===MapLoader.save_type){if(KeyboardManager.quickFill())return void e.setColor(paintIndex,0);if("fill"===mode)return void e.incrementCandidateColor(paintIndex)}displayProportionalEdit(e)}else KeyboardManager.quickFill()?e.setColor(paintIndex,0):KeyboardManager.areaSelect()?paintEntireState(e):e.incrementCandidateColor(paintIndex)}function stateClickHighlight(e){e.disabled||e.highlight()}function paintEntireState(e){if("./res/usa/house/12-2-2019-house.svg"===MapLoader.save_filename||"./res/usa/county/usa_county.svg"===MapLoader.save_filename){e.disabled;for(var a=e.name.substr(0,2),t=0,n=states.length;t<n;++t){var o=states[t],r="";"./res/usa/house/12-2-2019-house.svg"===MapLoader.save_filename?(a=e.name.substr(0,2),r=o.name.substr(0,2)):"./res/usa/county/usa_county.svg"===MapLoader.save_filename&&(a=e.name.substr(-2),r=o.name.substr(-2)),r===a&&o.setColor(paintIndex,0)}}}function stateClickDelete(e){KeyboardManager.areaSelect()?deleteEntireState(e):e.toggleDisable()}function deleteEntireState(e){if("./res/usa/house/12-2-2019-house.svg"===MapLoader.save_filename||"./res/usa/county/usa_county.svg"===MapLoader.save_filename)for(var a=!e.disabled,t=e.name.substr(0,2),n=0,o=states.length;n<o;++n){var r=states[n],s="";"./res/usa/house/12-2-2019-house.svg"===MapLoader.save_filename?(t=e.name.substr(0,2),s=r.name.substr(0,2)):"./res/usa/county/usa_county.svg"===MapLoader.save_filename&&(t=e.name.substr(-2),s=r.name.substr(-2)),s!==t||(a&&!1===r.disabled||!a&&!0===r.disabled)&&r.toggleDisable()}}function stateClickEC(e){var a,t,n,o;!1===e.disabled&&(a=document.getElementById("ecedit"),t=document.getElementById("ecedit-message"),n=document.getElementById("state-ec"),o=document.getElementById("state-id"),t.innerHTML="Set "+e.name+" delegates",n.value=e.voteCount,o.value=e.name,a.style.display="inline")}function specialClick(e,a){var t=e.getAttribute("id"),e=states.find(e=>e.name===t);"paint"!==mode&&"fill"!==mode||(e.incrementCandidateColor(paintIndex),countVotes(),ChartManager.updateChart(),LegendManager.updateLegend())}function legendClick(e,a){paintIndex=e,LegendManager.selectCandidateDisplay(a)}function displayProportionalEdit(e){LogoManager.loadButtons(),closeAllPopups(),document.getElementById("demdel").style.display="flex";var a=document.getElementById("demdel-message");"SU"!==e.name?a.innerHTML=e.name+"<br><small>"+e.voteCount+" delegates</small>":a.innerHTML="Super<br><small>"+e.voteCount+" delegates</small>",document.getElementById("demdel-state-name").value=e.name;for(var t=document.getElementById("demdel-ranges");t.firstChild;)t.removeChild(t.firstChild);var s,d,i,l=e.voteCount,c=0,u=document.createElement("DIV");for(s in u.setAttribute("id","display-Tossup"),CandidateManager.candidates)"Tossup"!==s&&((d=document.createElement("INPUT")).setAttribute("id","range-"+s),d.setAttribute("type","range"),d.setAttribute("max",l),void 0===e.delegates[s]&&(e.delegates[s]=0),d.value=e.delegates[s],c+=e.delegates[s],(i=document.createElement("DIV")).setAttribute("id","display-"+s),i.innerHTML=s+" - "+d.value+" - "+(e.delegates[s]/l*100).toFixed(2)+"%",d.oninput=function(){var t=e,n=s,o=i,r=parseInt(d.value);return function(e){var a;c-=r,c+=parseInt(this.value),l<c&&(c-=a=c-l,this.value-=a),r=parseInt(this.value),u.innerHTML="Tossup - "+(l-c)+" - "+((l-c)/l*100).toFixed(2)+"%",o.innerHTML=n+" - "+this.value+" - "+(this.value/l*100).toFixed(2)+"%",t.setDelegates("Tossup",l-c),t.setDelegates(n,parseInt(this.value)),countVotes(),ChartManager.updateChart(),LegendManager.updateLegend()}}(),t.appendChild(i),t.appendChild(d));u.innerHTML="Tossup - "+(l-c)+" - "+((l-c)/l*100).toFixed(2)+"%",t.appendChild(u)}function verifyCongress(){if(mobile)return!1;var e=document.getElementById("sidebar-congress");return enableCongress?(e.style.display="block",!0):!(e.style.display="none")}function verifyCongressContested(){if(mobile)return!1;var e=document.getElementById("sidebar-congress-contested");return enableCongressContested?(e.style.display="block",!0):!(e.style.display="none")}function setCongressContested(){var c;!1!==verifyCongressContested()&&(c=document.getElementById("sidebar-congress-contested"),db_getCongress(function(e){for(var a=0,t=states.length;a<t;++a){var n=states[a],o=n.name.split("-")[0],r=n.name.split("-")[1];"AL"===(i=r)&&(i="0");var s,d,i=parseInt(i).toString(),l=e.filter(e=>e.State===o&&e.District===i)[0];0!==n.colorValue&&((r=document.createElement("div")).setAttribute("class","sidebar-box"),(s=document.createElement("h3")).innerHTML=n.name,r.appendChild(s),(s=document.createElement("div")).innerHTML=l.Representative+" - "+l.Party,r.appendChild(s),(l=document.createElement("div")).setAttribute("class","sidebar-congress-colors"),(s=document.createElement("div")).innerHTML="<span>Projection</span>",s.setAttribute("class","sidebar-congress-color"),s.style.backgroundColor=n.htmlElement.style.fill,l.appendChild(s),(d=document.createElement("div")).innerHTML="<span>Map</span>",d.setAttribute("class","sidebar-congress-color"),d.style.backgroundColor=n.htmlElement.style.fill,d.style.cursor="pointer",n.onChange=function(){var e=d,a=n;return function(){e.style.backgroundColor=a.htmlElement.style.fill}}(),d.onclick=function(){var e=n,a=d;return function(){e.incrementCandidateColor(paintIndex,!1),a.style.backgroundColor=e.htmlElement.style.fill}}(),l.appendChild(d),r.appendChild(l),c.appendChild(r))}}))}function setCongressOnHover(){!1!==verifyCongress()&&db_getCongress(function(e){for(var a=0,t=states.length;a<t;++a){var r=states[a];r.htmlElement.onmouseover=function(){var a=r.name.split("-")[0],t=r.name.split("-")[1];"AL"===(n=t)&&(n="0");var n=parseInt(n).toString(),o=e.filter(e=>e.State===a&&e.District===n)[0];return function(){var e=document.getElementById("sidebar-congress-district");e.innerHTML=a+"-"+t,(e=document.getElementById("sidebar-congress-representative")).innerHTML=o.Representative,(e=document.getElementById("sidebar-congress-party")).innerHTML=o.Party,KeyboardManager.keyStates[70]&&stateClick(this,{setSafe:!0})}}()}})}function db_getCongress(a){fetch("req_congress.php").then(e=>e.json()).then(e=>{a(e)})}var GlobalData={argentina_chamber_of_deputies:{"Buenos Aires":70,"Buenos Aires City":25,Catamarca:5,Chaco:7,Chubut:5,"Córdoba":18,Corrientes:7,"Entre Ríos":9,Formosa:5,Jujuy:6,"La Pampa":5,"La Rioja":5,Mendoza:10,Misiones:7,"Neuquén":5,"Río Negro":5,Salta:7,"San Juan":6,"San Luis":5,"Santa Cruz":5,"Santa Fe":19,"Santiago del Estero":7,"Tierra del Fuego":5,"Tucumán":9},turkey_national_assembly:{Adana:15,"Adıyaman":5,Afyonkarahisar:6,"Ağrı":4,Aksaray:4,Amasya:3,Ankara:36,Antalya:16,Ardahan:2,Artvin:2,"Aydın":8,"Balıkesir":9,"Bartın":2,Batman:5,Bayburt:1,Bilecik:2,"Bingöl":3,Bitlis:3,Bolu:3,Burdur:3,Bursa:20,"Çanakkale":4,"Çankırı":2,"Çorum":4,Denizli:8,"Diyarbakır":12,"Düzce":3,Edirne:4,"Elazığ":5,Erzincan:2,Erzurum:6,"Eskişehir":7,Gaziantep:14,Giresun:4,"Gümüşhane":2,"Hakkâri":3,Hatay:11,"Iğdır":2,Isparta:4,"İstanbul":98,"İzmir":28,"Kahramanmaraş":8,Kars:3,Kastamonu:3,"Karabük":3,Karaman:3,Kayseri:10,Kilis:2,"Kırklareli":3,"Kırıkkale":3,"Kırşehir":2,Kocaeli:13,Konya:15,"Kütahya":5,Malatya:6,Manisa:10,Mardin:6,Mersin:13,"Muğla":7,"Muş":4,"Nevşehir":3,"Niğde":3,Ordu:6,Osmaniye:4,Rize:3,Sakarya:7,Samsun:9,Siirt:3,Sinop:2,Sivas:5,"Şanlıurfa":14,"Şırnak":4,"Tekirdağ":7,Tokat:5,Trabzon:6,Tunceli:2,"Uşak":3,Van:8,Yalova:3,Yozgat:4,Zonguldak:5},south_africa_national_assembly:{"Eastern Cape":25,"Western Cape":23,"Northern Cape":5,Gauteng:48,KwaZulu:41,Limpopo:19,Mpumalanga:15,"Free State":11,"North West Cape":13,"South Africa":200},portugal_constituencies:{Lisbon:47,Porto:39,Braga:19,"Setúbal":18,Aveiro:16,Leiria:10,Coimbra:9,Faro:9,"Santarém":9,Viseu:9,Madeira:6,"Viana do Castelo":6,Azores:5,"Vila Real":5,Guarda:4,"Castelo Branco":4,Beja:3,"Bragança":3,"Évora":3,Portalegre:2,Europe:2,"Outside Europe":2},ireland_constituencies:{Donegal:5,"Sligo-Leitrim":4,Mayo:4,"Galway West":5,Clare:4,Kerry:5,"Cork South-West":3,"Cork North-West":3,"Limerick County":3,"Limerick City":4,"Cork South-Central":4,"Cork North-Central":4,"Cork East":4,Waterford:4,Tipperary:5,"Carlow-Kilkenny":5,Wexford:5,Wicklow:5,"Kildare North":4,"Kildare South":4,"Laois-Offaly":5,"Galway East":3,"Roscommon-Galway":3,"Longford-Westmeath":4,"Meath West":3,"Meath East":3,Louth:5,"Cavan-Monaghan":5,"Dublin Fingal":5,"Dublin West":4,"Dublin North-West":3,"Dublin Bay North":5,"Dublin Mid-West":4,"Dublin South-Central":4,"Dublin Central":4,"Dublin Bay South":4,"Dublin South-West":5,"Dublin Rathdown":3,"Dún Laoghaire":4},brazil_deputies:{"São Paulo":70,"Minas Gerais":53,"Rio de Janeiro":46,Bahia:39,"Rio Grande do Sul":31,"Paraná":30,Pernambuco:25,"Ceará":22,"Maranhão":18,"Goiás":17,"Pará":17,"Santa Catarina":16,"Paraíba":12,"Espírito Santo":10,"Piauí":10,Alagoas:9,Acre:8,Amazonas:8,"Amapá":8,"Distrito Federal do Brasil":8,"Mato Grosso do Sul":8,"Mato Grosso":8,"Rio Grande do Norte":8,"Rondônia":8,Roraima:8,Sergipe:8,Tocantins:8},netherlands_provinces:{Groningen:43,Friesland:43,Drenthe:41,Overijssel:47,Flevoland:41,Gelderland:55,Utrecht:49,"Noord-Holland":55,"Zuid-Holland":55,Zeeland:39,"Noord-Brabant":55,Limburg:47},spain_constituencies:{"La Coruña":8,Pontevedra:7,Lugo:4,Orense:4,Asturias:7,"León":4,Zamora:3,Salamanca:4,"Cáceres":4,Badajoz:6,Huelva:5,Seville:12,"Cádiz":9,Cordoba:6,"Málaga":11,Granada:7,Almeria:6,Jaen:5,Murcia:10,Alicante:12,Albacete:4,"Ciudad Real":5,Toledo:6,Cuenca:3,Valencia:15,"Castellón":5,Teruel:3,Guadalajara:3,Madrid:37,Avila:3,Segovia:3,Valladolid:5,Palencia:3,Burgos:4,Soria:2,Zaragoza:7,Tarragona:6,Barcelona:32,Girona:6,Lreida:4,Huesca:3,Navarre:5,"La Rioja":4,"Álava":4,Guipuzcoa:6,Biscay:8,Cantabria:5,Ceuta:1,Melilla:1,"Santa Cruz de Tenerife":7,"Las Palmas":8,"Balearic Islands":8},switzerland_national_council:{Aargau:16,"Appenzell Outer Rhodes":1,"Appenzell Inner Rhodes":1,"Basel-Landschaft":7,"Basel-Stadt":5,Bern:24,Fribourg:7,Geneva:12,Glarus:1,"Graubünden":5,Jura:2,Lucerne:9,"Neuchâtel":4,Nidwalden:1,Obwalden:1,"St. Gallen":12,Schaffhausen:2,Schwyz:4,Solothurn:6,Thurgau:6,Ticino:8,Uri:1,Vaud:19,Valais:8,Zurich:35,Zug:3},switzerland_council_of_states:{Aargau:2,"Appenzell Outer Rhodes":1,"Appenzell Inner Rhodes":1,"Basel-Landschaft":1,"Basel-Stadt":1,Bern:2,Fribourg:2,Geneva:2,Glarus:2,"Graubünden":2,Jura:2,Lucerne:2,"Neuchâtel":2,Nidwalden:1,Obwalden:1,"St. Gallen":2,Schaffhausen:2,Schwyz:2,Solothurn:2,Thurgau:2,Ticino:2,Uri:2,Vaud:2,Valais:2,Zurich:2,Zug:2},sweden_riksdag:{Sweden:39,"Stockholms kommun":29,Stockholm:39,Uppsala:11,"Södermanland":9,"Östergötland":14,"Jönköping":11,Kronoberg:6,Kalmar:8,Gotland:2,Blekinge:5,"Malmö kommun":10,"Skåne läns västra":9,"Skåne läns södra":12,"Skåne läns norra och östra":10,"Värmland":9,"Örebro":9,"Västmanland":8,Dalarna:9,"Gävleborg":9,"Västernorrland":8,"Jämtland":4,"Västerbotten":9,Norrbotten:8,Halland:10,"Göteborgs kommun":17,"Västra Götalands läns norra":8,"Västra Götalands läns östra":9,"Västra Götalands läns västra":11,"Västra Götalands läns södra":7},usa_territories_ec:{AL:9,AK:3,AZ:11,AR:6,CA:55,CO:9,CT:7,DE:3,FL:29,GA:16,HI:4,ID:4,IL:20,IN:11,IA:6,KS:6,KY:8,LA:8,ME:4,"ME-AL":2,"ME-D1":1,"ME-D2":1,MD:10,MA:11,MI:16,MN:10,MS:6,MO:10,MT:3,NE:5,"NE-AL":2,"NE-D1":1,"NE-D2":1,"NE-D3":1,NV:6,NH:4,NJ:14,NM:5,NY:29,NC:15,ND:3,OH:18,OK:7,OR:7,PA:20,RI:4,SC:9,SD:3,TN:11,TX:38,UT:6,VT:3,VA:13,WA:12,WV:5,WI:10,WY:3,DC:3,AS:3,GU:3,MP:3,PR:7,VI:3},usa_ec:{AL:9,AK:3,AZ:11,AR:6,CA:55,CO:9,CT:7,DE:3,FL:29,GA:16,HI:4,ID:4,IL:20,IN:11,IA:6,KS:6,KY:8,LA:8,ME:4,"ME-AL":2,"ME-D1":1,"ME-D2":1,MD:10,MA:11,MI:16,MN:10,MS:6,MO:10,MT:3,NE:5,"NE-AL":2,"NE-D1":1,"NE-D2":1,"NE-D3":1,NV:6,NH:4,NJ:14,NM:5,NY:29,NC:15,ND:3,OH:18,OK:7,OR:7,PA:20,RI:4,SC:9,SD:3,TN:11,TX:38,UT:6,VT:3,VA:13,WA:12,WV:5,WI:10,WY:3,DC:3},usa_2024_ec:{AL:9,AK:3,AZ:11,AR:6,CA:54,CO:10,CT:7,DE:3,FL:30,GA:16,HI:4,ID:4,IL:19,IN:11,IA:6,KS:6,KY:8,LA:8,ME:4,"ME-AL":2,"ME-D1":1,"ME-D2":1,MD:10,MA:11,MI:15,MN:10,MS:6,MO:10,MT:4,NE:5,"NE-AL":2,"NE-D1":1,"NE-D2":1,"NE-D3":1,NV:6,NH:4,NJ:14,NM:5,NY:28,NC:16,ND:3,OH:17,OK:7,OR:8,PA:19,RI:4,SC:9,SD:3,TN:11,TX:40,UT:6,VT:3,VA:13,WA:12,WV:4,WI:10,WY:3,DC:3},usa_1972_ec:{AL:9,AK:3,AZ:6,AR:6,CA:45,CO:7,CT:8,DE:3,FL:17,GA:12,HI:4,ID:4,IL:26,IN:13,IA:8,KS:7,KY:9,LA:10,ME:4,"ME-AL":2,"ME-D1":1,"ME-D2":1,MD:10,MA:14,MI:21,MN:10,MS:7,MO:12,MT:4,NE:5,NV:3,NH:4,NJ:17,NM:4,NY:41,NC:13,ND:3,OH:25,OK:8,OR:6,PA:27,RI:4,SC:8,SD:4,TN:10,TX:26,UT:4,VT:3,VA:11,WA:9,WV:6,WI:11,WY:3,DC:3},usa_pre_civilwar_ec:{AL:9,AK:0,AZ:0,AR:4,CA:4,CO:0,CT:6,DE:3,FL:3,GA:10,HI:0,ID:0,IL:11,IN:13,IA:4,KS:0,KY:12,LA:6,ME:8,MD:8,MA:13,MI:6,MN:4,MS:7,MO:9,MT:0,NE:0,NV:0,NH:5,NJ:7,NM:0,NY:35,NC:10,ND:0,OH:23,OK:0,OR:3,PA:27,RI:4,SC:8,SD:0,TN:12,TX:4,UT:0,VT:5,VA:15,WA:0,WI:5,WY:0,DC:0},usa_no_districts_ec:{AL:9,AK:3,AZ:11,AR:6,CA:55,CO:9,CT:7,DE:3,FL:29,GA:16,HI:4,ID:4,IL:20,IN:11,IA:6,KS:6,KY:8,LA:8,ME:4,MD:10,MA:11,MI:16,MN:10,MS:6,MO:10,MT:3,NE:5,NV:6,NH:4,NJ:14,NM:5,NY:29,NC:15,ND:3,OH:18,OK:7,OR:7,PA:20,RI:4,SC:9,SD:3,TN:11,TX:38,UT:6,VT:3,VA:13,WA:12,WV:5,WI:10,WY:3,DC:3},lte_ec:{NE:11,SE:9,MW:8,WE:6,SW:5,OV:7},dem_primary:{AL:52,AK:15,AS:6,AZ:67,AR:31,CA:415,CO:67,CT:60,DE:21,DA:13,DC:20,FL:219,GA:105,GU:7,HI:24,ID:20,IL:155,IN:82,IA:41,KS:39,KY:54,LA:54,ME:24,MD:96,MA:91,MI:125,MN:75,MS:36,MO:68,MT:19,NE:29,NV:36,NH:24,NJ:126,NM:34,NY:274,NC:110,ND:14,NI:6,OH:136,OK:37,OR:61,PA:186,PR:51,RI:26,SC:54,SD:16,SU:771,TN:64,TX:228,UT:29,VT:16,VI:7,VA:99,WA:89,WV:28,WI:84,WY:14},rep_primary:{AL:50,AK:28,AS:9,AZ:57,AR:40,CA:172,CO:37,CT:28,DE:16,DC:19,FL:122,GA:76,GU:9,HI:19,ID:32,IL:67,IN:70,IA:40,KS:39,KY:46,LA:46,ME:22,MD:38,MA:41,MI:73,MN:39,MS:39,MO:54,MT:27,NE:36,NV:25,NH:22,NJ:49,NM:22,NY:95,NC:71,ND:29,NI:9,OH:82,OK:43,OR:28,PA:88,PR:23,RI:19,SC:50,SD:29,TN:58,TX:155,UT:40,VT:17,VI:9,VA:49,WA:44,WV:34,WI:52,WY:29},eu_parliament:{"IE-S":5,"IE-N":4,"IE-D":4,"BE-D":12,"BE-F":8,"BE-G":1,FR:79,ES:59,PT:21,IT:76,MT:6,CY:6,GR:21,BG:17,RO:33,HR:12,HU:21,SL:8,AT:19,SK:14,CZ:21,PO:52,LI:11,LV:8,EE:7,FI:14,SE:21,DK:14,NL:29,LU:6,DE:96},to_short_hand:{Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"}};class SimulatorData{}function enableFullscreen(){var e=document.documentElement;rfs=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen,"undefined"!=typeof rfs&&rfs.call(e)}function displayCandidateEditMenu(e){LogoManager.loadFlags(),LogoManager.loadButtons(),closeAllPopups(),document.getElementById("candidateedit").style.display="flex",document.getElementById("candidate-name").value=e,document.getElementById("candidate-safe").value=CandidateManager.candidates[e].colors[0],document.getElementById("candidate-solid").value=CandidateManager.candidates[e].colors[1],document.getElementById("candidate-likely").value=CandidateManager.candidates[e].colors[2],document.getElementById("candidate-lean").value=CandidateManager.candidates[e].colors[3],document.getElementById("candidate-tilt").value=CandidateManager.candidates[e].colors[4];var a=document.getElementById("candidate-originalName");document.getElementById("candidateedit-message").innerHTML="Edit "+e,a.value=e}function displayUpdateServiceWorker(){document.getElementById("notification-update-serviceworker").style.display="inline"}function displayNotification(e,a){LogoManager.loadFlags(),LogoManager.loadButtons();var t=document.getElementById("notification"),n=t.querySelector("#notification-message"),o=t.querySelector("#notification-title");t.style.display="inline",n.innerHTML=a,o.innerHTML=e}function displayAddCandidateMenu(e){LogoManager.loadFlags(),LogoManager.loadButtons(),closeAllPopups(),CookieManager.loadCustomColors(),document.getElementById("addcandidatemenu").style.display="flex"}function closeAllPopups(){for(var e=document.getElementsByClassName("popup"),a=0;a<e.length;++a){var t=e[a];t.style&&(t.style.display="none")}document.activeElement.blur()}function displayCustomColorEditor(e){LogoManager.loadFlags(),LogoManager.loadButtons(),closeAllPopups(),document.getElementById("custom-color-name").value=e,document.getElementById("customcoloreditor").style.display="flex",document.getElementById("safecustom").value=CookieManager.cookies[e+"safe"],document.getElementById("solidcustom").value=CookieManager.cookies[e+"solid"],document.getElementById("likelycustom").value=CookieManager.cookies[e+"likely"],document.getElementById("leaningcustom").value=CookieManager.cookies[e+"leaning"],document.getElementById("tiltingcustom").value=CookieManager.cookies[e+"tilting"]}function setPalette(e,a){switch(a&&CookieManager.appendCookie("theme",e),e){case"dark":darkPalette();break;case"greyscale":greyscalePalette();break;case"terminal":terminalPalette();break;case"contrast":contrastPalette();break;case"metallic":metallicPalette();break;case"halloween":halloweenPalette();break;case"white":toWinPalette();break;case"usaelection":usaElectionPalette();break;case"default":default:lightPalette()}for(var t=0,n=states.length;t<n;++t)states[t].verifyTossupColor()}function darkPalette(){setBackgroundColor("#181922"),setOtherText("white"),setDisableColor("#212326"),setTossupColor("#6b6e73"),setMapStyle("#181922",1.5),setTextStyle("white","bold"),setChartBorderStyle(1,"#2b2e33"),setChartBarColor("#2b2e33"),setChartBarShadow(""),setClickButtonColor("#2b2e33"),setClickButtonColor("#2B2E33"),setClickButtonTextColor("#FFFFFF"),setMenuColor("#000000"),setSideBarColor("#2b2e33"),setSideBarTextStyle("#ffffff"),setBorderStyle("#000000",7),ChartManager.chartOptions.plugins.datalabels.borderWidth=2,ChartManager.chartOptions.plugins.datalabels.borderRadius=4,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#ffffff",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#ffffff",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=darkPalette}function greyscalePalette(){setBackgroundColor("#252525"),setOtherText("white"),setDisableColor("#212326"),setTossupColor("#888888"),setMapStyle("#181922",1.5),setTextStyle("white","bold"),setChartBorderStyle(1,"#1b1b1b"),setChartBarColor("#454545"),setChartBarShadow(""),setClickButtonColor("#454545"),setClickButtonTextColor("#FFFFFF"),setMenuColor("#101010"),setSideBarColor("#454545"),setSideBarTextStyle("#ffffff"),setBorderStyle("#252525",7),ChartManager.chartOptions.plugins.datalabels.borderWidth=2,ChartManager.chartOptions.plugins.datalabels.borderRadius=4,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#ffffff",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#ffffff",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=darkPalette}function terminalPalette(){setBackgroundColor("#000000"),setOtherText("white"),setDisableColor("#bcc8d9"),setTossupColor("black"),setChartBorderStyle(2,"#ffffff"),setTextStyle("white","bold"),setMapStyle("white",1.5),setChartBarColor("black"),setChartBarShadow(""),setClickButtonColor("#000000"),setClickButtonTextColor("#ffffff"),setMenuColor("#f8f9fa"),setSideBarColor("#f8f9fa"),setSideBarTextStyle("#000000"),setBorderStyle("#ffffff",6),ChartManager.chartOptions.plugins.datalabels.borderWidth=2,ChartManager.chartOptions.plugins.datalabels.borderRadius=4,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#ffffff",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#ffffff",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=terminalPalette}function lightPalette(){setBackgroundColor("#dcdcdc"),setOtherText("black"),setDisableColor("#212326"),setTossupColor("#696969"),setMapStyle("#dcdcdc",1.5),setChartBarColor("#3b3e43"),setChartBarShadow(""),setTextStyle("white","bold"),setChartBorderStyle(1,"#3b3e43"),setClickButtonColor("#3b3e43"),setClickButtonTextColor("white"),setMenuColor("#000000"),setSideBarColor("#dcdcdc"),setSideBarTextStyle("#000000"),setBorderStyle("#000000",6),ChartManager.chartOptions.plugins.datalabels.borderWidth=2,ChartManager.chartOptions.plugins.datalabels.borderRadius=4,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#ffffff",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#ffffff",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=lightPalette}function contrastPalette(){setBackgroundColor("#f8f9fa"),setOtherText("black"),setDisableColor("#212326"),setTossupColor("#36454f"),setMapStyle("#f8f9fa",1.5),setTextStyle("white","bold"),setChartBorderStyle(1,"#fafafa"),setChartBarColor("#fafafa"),setChartBarShadow(""),setClickButtonColor("#fafafa"),setClickButtonTextColor("#000000"),setMenuColor("#0645b4"),setSideBarColor("#f8f9fa"),setSideBarTextStyle("#000000"),setBorderStyle("#f8f9fa",6),ChartManager.chartOptions.plugins.datalabels.borderWidth=2,ChartManager.chartOptions.plugins.datalabels.borderRadius=4,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#000000",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#000000",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=contrastPalette}function metallicPalette(){setBackgroundImage("linear-gradient(#696969, #33353b)"),setOtherText("white"),setDisableColor("#212326"),setTossupColor("#808080"),setMapStyle("black",1.5),setTextStyle("white","bold"),setChartBorderStyle(1,"#33353b"),setChartBarColor("#33353b"),setChartBarShadow(""),setClickButtonColor("#33353b"),setClickButtonTextColor("#FFFFFF"),setMenuColor("black"),setSideBarColor("#33353b"),setSideBarTextStyle("#ffffff"),setBorderStyle("#000000",6),ChartManager.chartOptions.plugins.datalabels.borderWidth=2,ChartManager.chartOptions.plugins.datalabels.borderRadius=4,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#ffffff",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#ffffff",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=metallicPalette}function usaElectionPalette(){setBackgroundImage('url("./res/images/usa_flag.jpeg")',"cover"),setOtherText("black"),setDisableColor("#212326"),setTossupColor("#888888"),setMapStyle("#232323",1.8),setChartBarColor("#454545"),setChartBarColor("#000000"),setChartBarShadow(""),setChartBarShadow("0px -5px 5px 2px #060606"),setTextStyle("white","bold"),setChartBorderStyle(1,"#000000"),setClickButtonColor("#555555"),setClickButtonTextColor("#FFFFFF"),setMenuColor("#101010"),setSideBarColor("#aaaaaa"),setSideBarTextStyle("#000000"),setBorderStyle("#454545",6),ChartManager.chartOptions.plugins.datalabels.borderWidth=2,ChartManager.chartOptions.plugins.datalabels.borderRadius=4,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#ffffff",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#ffffff",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=usaElectionPalette}function halloweenPalette(){setBackgroundImage('url("./res/images/halloween.jpg")'),setOtherText("#ffffff"),setDisableColor("#dddddd"),setTossupColor("#928e85"),setMapStyle("#000000",1.25),setTextStyle("white","bold"),setChartBorderStyle(1,"#000000"),setChartBarColor("#060606"),setChartBarShadow("0px -5px 5px 2px #060606"),setSideBarColor("#9c9b98"),setSideBarTextStyle("#000000"),setClickButtonColor("#060606"),setClickButtonTextColor("#ffffff"),setMenuColor("#928e85"),setBorderStyle("#ffffff",6),ChartManager.chartOptions.plugins.datalabels.borderWidth=0,ChartManager.chartOptions.plugins.datalabels.borderRadius=2,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#ffffff",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#ffffff",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=halloweenPalette}function toWinPalette(){setBackgroundColor("#f8f9fa"),setOtherText("black"),setDisableColor("#dddddd"),setTossupColor("#9E8767"),setMapStyle("#fffbf2",1),setTextStyle("white","bold"),setChartBorderStyle(1,"#fafafa"),setChartBarColor("#fafafa"),setChartBarShadow(""),setClickButtonColor("#fafafa"),setClickButtonTextColor("#000000"),setMenuColor("#000000"),setSideBarColor("#f8f9fa"),setSideBarTextStyle("#000000"),setBorderStyle("#f8f9fa",6),ChartManager.chartOptions.plugins.datalabels.borderWidth=0,ChartManager.chartOptions.plugins.datalabels.borderRadius=2,ChartManager.chartBarScales.yAxes[0].ticks.fontColor="#000000",ChartManager.chartBarScales.xAxes[0].ticks.fontColor="#000000",ChartManager.setChart(ChartManager.chartType,ChartManager.chartPosition),previousPalette=toWinPalette}function setOtherText(e){var a=document.getElementById("othertext");a&&a.setAttribute("fill",e)}function setBackgroundImage(e,a){var t=document.getElementById("application");t.style.backgroundColor="",t.style.backgroundImage=e,t.style.backgroundSize=a||"auto"}function setBackgroundColor(e){var a=document.getElementById("application");a.style.background=e,a.style.backgroundImage=""}function setChartBorderStyle(e,a){ChartManager.chartBorderWidth=e,ChartManager.chartBorderColor=a,document.getElementById("battlechartright").style.border="1px solid "+a,ChartManager.updateChart(),document.getElementById("legend-div").style.borderColor=a}function setMenuColor(e){document.getElementById("menu-div").style.backgroundColor=e;for(var a=document.getElementsByClassName("click-button"),t=0;t<a.length;++t)a[t].style.borderColor=e}function setMenuImage(e){var a=document.getElementById("menu-div");a.style.backgroundImage=e,a.style.backgroundSize="contain"}function setClickButtonTextColor(e){for(var a=document.getElementsByClassName("click-button"),t=0;t<a.length;++t)a[t].style.color=e}function setClickButtonColor(e){for(var a=document.getElementsByClassName("click-button"),t=0;t<a.length;++t)a[t].style.backgroundColor=e}function setDisableColor(e){CandidateManager.TOSSUP.colors[1]=e}function setTossupColor(e){CandidateManager.TOSSUP.colors[2]=e,document.getElementById("Tossup-text").style.backgroundColor=e;var a=document.getElementById("addcandidate-button-text");a&&(a.style.backgroundColor=e)}function setMapStyle(e,a){var t=document.getElementById("outlines");t.style.stroke=e,t.style.strokeWidth=a*strokeMultiplier;t=document.getElementById("proportional");t&&(t.style.stroke=e,t.style.strokeWidth=a*strokeMultiplier);t=document.getElementById("special");null!=t&&(t.style.stroke=e,t.style.strokeWidth=a*strokeMultiplier)}function setBorderStyle(e,a){var t=document.getElementById("*lines*");null!==t&&(t.style.stroke=e,t.style.strokeWidth=a*strokeMultiplier)}function setSideBarColor(e){var a=document.getElementById("sidebar");a&&(a.style.background=e)}function setSideBarTextStyle(e){var a=document.getElementById("sidebar");a&&(a.style.color=e)}function setSideBarSocialOutline(e,a){var t=document.getElementById("sidebar");if(t)for(var n=t.querySelectorAll(".sidebar-button"),o=0;o<n.length;++o){var r=n[o];r.style.borderColor=e,r.style.borderWidth=a}}function setChartBarColor(e){document.getElementById("chart-div").style.background=e}function setChartBarShadow(e){document.getElementById("chart-div").style.boxShadow=e}function setTextStyle(e,a){var t=document.getElementById("text");if(null!==t)for(var n in t.style.strokeWidth=0,t.style.fontWeight=a,t.style.fill=e,t.style.textAlign="center",t.children){n=t.children[n];try{n.setAttribute("text-anchor","middle"),n.setAttribute("alignment-baseline","central")}catch(e){}}var o=document.getElementById("battlechart");o.style.color=e,o.style.fontWeight=a;o=document.getElementById("legend-div");o.style.color=e,o.style.weight=a}function setBattleHorizontal(){document.getElementById("application").style.flexDirection="column-reverse",document.getElementById("map-div").style.height="85%";var e=document.getElementById("chart-div");e.style.flexDirection="row",e.style.width="100%",e.style.height="15%";e=document.getElementById("battlechart");e.style.flexDirection="column",e.style.height="75%",e.style.margin="5%",document.getElementById("battlechartmidpoly").setAttribute("transform","translate(20 0) rotate(90)");e=document.getElementById("battlechartmid");e.style.height="100%",e.style.width="";e=document.getElementById("battlechartright");e.style.flexDirection="row",e.style.height="80%",e.style.width="100%";e=document.getElementById("battlechartleft");e.style.height="20px",e.style.width="20px";e=document.getElementById("topbar");e.style.borderRight=e.style.borderBottom,e.style.borderBottom="",e.style.flexDirection="row",e.style.minWidth="0";e=document.getElementById("bottombar");e.style.borderLeft=e.style.borderTop,e.style.borderTop="",e.style.flexDirection="row",e.style.minWidth="0"}function unsetBattleHorizontal(){document.getElementById("application").style.flexDirection="row",document.getElementById("map-div").style.height="100%";var e=document.getElementById("chart-div");e.style.flexDirection="column",e.style.width="28vw",e.style.height="100%";e=document.getElementById("battlechart");e.style.flexDirection="row",e.style.height="100%",e.style.margin="5%",mobile?e.style.width="100%":e.style.width="50%",document.getElementById("battlechartmidpoly").setAttribute("transform","translate(0 0) rotate(0)");e=document.getElementById("battlechartmid");e.style.height="",e.style.width="100%",(e=document.getElementById("battlechartright")).style.flexDirection="column",e.style.width="85%",e.style.height="100%";e=document.getElementById("battlechartleft");battlechartleft.style.height="20px",battlechartleft.style.width="20px";e=document.getElementById("topbar");e.style.borderBottom=e.style.borderRight,e.style.borderRight="",e.style.flexDirection="column",e.style.minWidth="0";e=document.getElementById("bottombar");e.style.borderTop=e.style.borderLeft,e.style.borderLeft="",e.style.flexDirection="column",e.style.minWidth="0"}function toggleYAPNews(){var e=document.getElementById("sidebar");null!==e&&("none"===e.style.display?(e.style.display="inline-flex",gtag("event",currentCache,{event_category:"Sidebar",event_label:"Toggle On"})):(e.style.display="none",gtag("event",currentCache,{event_category:"Sidebar",event_label:"Toggle Off"})),MapManager.centerMap())}function ifInIframe(){if(window.location!==window.parent.location){var e=document.getElementById("sidebar");e&&(e.style.display="none"),(e=document.getElementById("menu-div"))&&(e.style.display="none"),(e=document.getElementById("yapms-watermark"))&&(e.style.display="flex");for(var a=document.getElementsByClassName("adslot_mobile"),t=0;t<a.length;++t)(e=a[t]).style.display="none";setPalette("light",!1)}}function showShortcuts(){var e;"./res/usa/county/usa_county.svg"!==MapLoader.save_filename&&"./res/usa/house/12-2-2019-house.svg"!==MapLoader.save_filename||(e=document.getElementById("county-house-d"))&&(e.style.display="")}SimulatorData.USA_2020_Cook={AK:{Republican:100,Democrat:0},AL:{Republican:100,Democrat:0},AR:{Republican:100,Democrat:0},AZ:{Republican:50,Democrat:50},CA:{Republican:0,Democrat:100},CO:{Republican:20,Democrat:80},CT:{Republican:0,Democrat:100},DE:{Republican:0,Democrat:100},FL:{Republican:50,Democrat:50},GA:{Republican:70,Democrat:30},HI:{Republican:0,Democrat:100},IA:{Republican:70,Democrat:30},ID:{Republican:100,Democrat:0},IL:{Republican:0,Democrat:100},IN:{Republican:100,Democrat:0},KS:{Republican:100,Democrat:0},KY:{Republican:100,Democrat:0},LA:{Republican:100,Democrat:0},"ME-AL":{Republican:30,Democrat:70},"ME-D1":{Republican:0,Democrat:100},"ME-D2":{Republican:70,Democrat:20},MI:{Republican:50,Democrat:50},MD:{Republican:0,Democrat:100},MA:{Republican:0,Democrat:100},MN:{Republican:30,Democrat:70},MS:{Republican:100,Democrat:0},MO:{Republican:100,Democrat:0},MT:{Republican:100,Democrat:0},"NE-AL":{Republican:100,Democrat:0},"NE-D1":{Republican:100,Democrat:0},"NE-D2":{Republican:70,Democrat:30},"NE-D3":{Republican:100,Democrat:0},NV:{Republican:30,Democrat:70},NH:{Republican:30,Democrat:70},NJ:{Republican:0,Democrat:100},NM:{Republican:0,Democrat:100},NY:{Republican:0,Democrat:100},NC:{Republican:70,Democrat:30},ND:{Republican:100,Democrat:0},OH:{Republican:80,Democrat:20},OK:{Republican:100,Democrat:0},OR:{Republican:0,Democrat:100},PA:{Republican:50,Democrat:50},RI:{Republican:0,Democrat:100},SC:{Republican:100,Democrat:0},SD:{Republican:100,Democrat:0},TN:{Republican:100,Democrat:0},TX:{Republican:80,Democrat:20},UT:{Republican:100,Democrat:0},VT:{Republican:0,Democrat:100},VA:{Republican:20,Democrat:80},WA:{Republican:0,Democrat:100},WI:{Republican:50,Democrat:50},WV:{Republican:100,Democrat:0},WY:{Republican:100,Democrat:0},DC:{Republican:0,Democrat:100}},document.getElementById("yapnews")&&document.getElementById("yapnews").addEventListener("transitionend",function(){MapManager.centerMap()});class Simulator{static init(){if(!mobile){document.getElementById("simulator-noclick").addEventListener("change",function(e){Simulator.ignoreClick=e.target.checked});var e=document.getElementById("sidebar-presets-select-simulator");e.addEventListener("change",function(e){switch(this.value){case"cook":Simulator.cookPresidentialPreset();break;case"random":Simulator.randomPreset();break;case"uniform":Simulator.uniformPreset()}});for(var a=document.getElementById("sidebar-presets-select-simulator");a.firstChild;)a.removeChild(a.firstChild);var t=document.createElement("option");t.text="Custom",t.value="custom",t.selected=!0,t.disabled=!0,t.hidden=!0,e.appendChild(t),(t=document.createElement("option")).text="Uniform",t.value="uniform",e.appendChild(t),(t=document.createElement("option")).text="Random",t.value="random",e.appendChild(t),"USA_2020_presidential"===php_load_map_id?((t=document.createElement("option")).text="Cook",t.value="cook",e.appendChild(t),!1===php_load_map&&Simulator.cookPresidentialPreset()):!1===php_load_map&&Simulator.uniformPreset(),void 0===states[0].simulator&&Simulator.uniformPreset()}}static uniformPreset(){if(!mobile){console.log("Simulator: Uniform preset"),document.getElementById("sidebar-presets-select-simulator").value="uniform";for(var e=0;e<states.length;++e)for(t in(a=states[e]).simulator={},CandidateManager.candidates)"Tossup"!==t&&(a.simulator[t]=0);for(var a,t,e=0;e<proportionalStates.length;++e)for(t in(a=proportionalStates[e]).simulator={},CandidateManager.candidates)"Tossup"!==t&&(a.simulator[t]=0);Simulator.state&&Simulator.view(Simulator.state)}}static randomPreset(){if(!mobile){console.log("Simulator: Random preset"),document.getElementById("sidebar-presets-select-simulator").value="random";for(var e=0;e<states.length;++e)for(t in(a=states[e]).simulator={},CandidateManager.candidates)"Tossup"!==t&&(a.simulator[t]=100*Math.random());for(var a,t,e=0;e<proportionalStates.length;++e)for(t in(a=proportionalStates[e]).simulator={},CandidateManager.candidates)"Tossup"!==t&&(a.simulator[t]=100*Math.random());Simulator.state&&Simulator.view(Simulator.state)}}static cookPresidentialPreset(){if(!mobile){console.log("Simulator: Cook preset"),document.getElementById("sidebar-presets-select-simulator").value="cook",CandidateManager.addCandidate("Republican","#bf1d29","#d40000","#ff5865","#ff8b98","#cf8980"),CandidateManager.addCandidate("Democrat","#1c408c","#0645b4","#577ccc","#8aafff","#949bb3"),countVotes(),ChartManager.updateChart();for(var e=0;e<states.length;++e){var a,t=states[e];for(a in t.simulator={},CandidateManager.candidates)"Republican"!==a&&"Democrat"!==a||(t.simulator[a]=SimulatorData.USA_2020_Cook[t.name][a])}Simulator.state&&Simulator.view(Simulator.state)}}static toggle(){var e,a,t,n,o;mobile||(Simulator.enabled=!Simulator.enabled,e=document.getElementById("sidebar-state-simulator"),a=document.getElementById("sidebar-run-simulator"),t=document.getElementById("sidebar-simulator-head"),n=document.getElementById("sidebar-settings-simulator"),o=document.getElementById("sidebar-presets-simulator"),Simulator.enabled?(e.style.display="block",a.style.display="block",n.style.display="block",o.style.display="block",t.innerHTML="Disable Simulator",Simulator.init(),gtag("event",currentCache,{event_category:"Simulator",event_label:"Simulator Enabled"})):(e.style.display="none",a.style.display="none",n.style.display="none",o.style.display="none",t.innerHTML="Enable Simulator",gtag("event",currentCache,{event_category:"Simulator",event_label:"Simulator Disabled"})))}static view(e){if(!mobile&&Simulator.enabled){Simulator.state=e;for(var a,t=document.getElementById("simulator-ranges");t.firstChild;)t.removeChild(t.firstChild);for(a in CandidateManager.candidates)if("Tossup"!==a){var n,o=0;for(n in e.simulator)o+=e.simulator[n];var r=100;0!==o&&(r=(e.simulator[a]/o*100).toFixed(2));var s=document.createElement("DIV");s.setAttribute("id","simulator-display-"+a),s.innerHTML=a+" - "+r+"%";r=document.createElement("INPUT");r.setAttribute("id","simulator-range-"+a),r.setAttribute("type","range"),r.setAttribute("max",100),r.setAttribute("min",0),r.setAttribute("step",1),r.value=e.simulator[a],r.oninput=function(){var r=e,s=a;return function(){var e=parseInt(this.value);r.simulator[s]=e;var a,t,n,o=0;for(a in CandidateManager.candidates)"Tossup"!==a&&(o+=r.simulator[a]);for(a in CandidateManager.candidates)"Tossup"!==a&&(t=document.getElementById("simulator-display-"+a),n=100,0!==o&&(n=(r.simulator[a]/o*100).toFixed(2)),t.innerHTML=a+" - "+n+"%")}}(),t.appendChild(s),t.appendChild(r)}var d=document.getElementById("simulator-state-title");e.name.match(/(Geometry|path([0-9]+)|g([0-9]+))/g)?d.innerHTML=e.fakename:d.innerHTML=e.name.replace(/_/g," ")}}static run(){mobile||0===Simulator.runState&&(Simulator.runState=2,MapLoader.clearMapCandidates(),Simulator.runTimeout=5e3/states.length,Simulator.runLoop(states,0,"proportional"===MapLoader.save_type||"primary"===MapLoader.save_type),Simulator.runLoop(proportionalStates,0,!0))}static runLoop(s,d,i){0!==s.length?setTimeout(function(){var e,a=s[d],t=[],n=0;for(e in a.simulator)n+=a.simulator[e],t.push({name:e,power:a.simulator[e]});for(var o=0;o<t.length;++o){var r=1/t.length;0!==n&&(r=t[o].power/n),0!==o&&(r+=t[o-1].percent),t[o].percent=r}for(i?Simulator.runProportionalState(a,t):Simulator.runTakeAllState(a,t),d+=1;d<s.length&&s[d].disabled;)d+=1;d<s.length?Simulator.runLoop(s,d,i):Simulator.runLoopFinish(s)},Simulator.runTimeout):--Simulator.runState}static runTakeAllState(e,a){for(var t=Math.random(),n=0;n<a.length;++n){var o=a[n].percent,r=a[n].name;if(t<=o){e.setColor(r,0),countVotes(),ChartManager.updateChart(),LegendManager.updateLegend();break}}}static runProportionalState(e,a){for(var t=e.voteCount,n=0;n<t;++n)for(var o=Math.random(),r=0;r<a.length;++r)if(o<=a[r].percent){var s=a[r].name;e.delegates[s]?e.delegates[s]+=1:e.delegates[s]=1,--e.delegates.Tossup;break}for(var d=0,r=1;r<a.length;++r){var i=a[r].name,l=a[d].name;e.delegates[i]>e.delegates[l]&&(d=r)}e.setColor(a[d].name,0,{setDelegates:!1}),countVotes(),LegendManager.updateLegend(),ChartManager.updateChart()}static runLoopFinish(e){var a,t,n;--Simulator.runState,"usa_ec"===MapLoader.save_dataid&&(n=e.find(e=>"ME-D1"===e.name),t=e.find(e=>"ME-D2"===e.name),n.candidate===t.candidate&&e.find(e=>"ME-AL"===e.name).setColor(n.candidate,0),a=e.find(e=>"NE-D1"===e.name),t=e.find(e=>"NE-D2"===e.name),n=e.find(e=>"NE-D3"===e.name),a.candidate===t.candidate&&t.candidate===n.candidate&&e.find(e=>"NE-AL"===e.name).setColor(a.candidate,0))}}Simulator.enabled=!1,Simulator.runState=0,Simulator.runTimeout=100,Simulator.ignoreClick=!1,Simulator.state=null;class SaveMap{static log(){var e,a={};for(o in a.filename=MapLoader.save_filename,a.dataid=MapLoader.save_dataid,a.type=MapLoader.save_type,a.year=MapLoader.save_year,a.fontsize=MapLoader.save_fontsize,a.strokewidth=MapLoader.save_strokewidth,a.candidates={},a.states={},a.proportional={},CandidateManager.candidates)"Tossup"!==o&&(e=CandidateManager.candidates[o],a.candidates[e.name]={},a.candidates[e.name].safe=e.colors[0],a.candidates[e.name].solid=e.colors[1],a.candidates[e.name].likely=e.colors[2],a.candidates[e.name].lean=e.colors[3],a.candidates[e.name].tilt=e.colors[4]);for(var t=0;t<states.length;++t){for(o in(n=states[t]).delegates)0===n.delegates[o]&&delete n.delegates[o];a.states[n.name]={},a.states[n.name].delegates=n.delegates,a.states[n.name].colorvalue=n.colorValue,a.states[n.name].disabled=n.disabled}for(var n,o,t=0;t<proportionalStates.length;++t){for(o in(n=proportionalStates[t]).delegates)0===n.delegates[o]&&delete n.delegates[o];a.proportional[n.name]={},a.proportional[n.name].delegates=n.delegates,a.proportional[n.name].colorvalue=n.colorValue,a.proportional[n.name].disabled=n.disabled}console.log(JSON.stringify(a))}static upload(e,a){(o=new FormData).append("captcha",a),o.append("img",e);var t={};t.filename=MapLoader.save_filename,t.dataid=MapLoader.save_dataid,t.type=MapLoader.save_type,t.year=MapLoader.save_year,t.fontsize=MapLoader.save_fontsize,t.strokewidth=MapLoader.save_strokewidth,t.candidates={},t.states={},t.proportional={};var n,o=new FormData;for(d in console.log("token: "+a),o.append("captcha",a),o.append("img",e),CandidateManager.candidates)"Tossup"!==d&&(n=CandidateManager.candidates[d],t.candidates[n.name]={},t.candidates[n.name].safe=n.colors[0],t.candidates[n.name].solid=n.colors[1],t.candidates[n.name].likely=n.colors[2],t.candidates[n.name].lean=n.colors[3],t.candidates[n.name].tilt=n.colors[4]);for(var r=0;r<states.length;++r){for(d in(s=states[r]).delegates)0===s.delegates[d]&&delete s.delegates[d];t.states[s.name]={},t.states[s.name].delegates=s.delegates,t.states[s.name].colorvalue=s.colorValue,t.states[s.name].disabled=s.disabled}for(var s,d,r=0;r<proportionalStates.length;++r){for(d in(s=proportionalStates[r]).delegates)0===s.delegates[d]&&delete s.delegates[d];t.proportional[s.name]={},t.proportional[s.name].delegates=s.delegates,t.proportional[s.name].colorvalue=s.colorValue,t.proportional[s.name].disabled=s.disabled}o.append("data",JSON.stringify(t)),fetch("https://yapms.org/upload.php",{method:"POST",body:o}).then(e=>e.text()).then(e=>{var a=(e=e.split(" "))[0],t=e[1],e=document.getElementById("shareurl");"reCaptcha_Failed(restart_web_browser)"===a?(e.setAttribute("href",a),e.innerHTML="reCaptcha Failed: possible solution is to restart your web-browser"):"reCaptcha_Bot_Detected"===a?(e.setAttribute("href",a),e.innerHTML="reCaptcha Failed: suspicious activity detected"):(e.setAttribute("href",a),e.innerHTML=a),e.style.display="";e=document.getElementById("sharebuttons");e&&(e.style.display="flex");e=document.getElementById("downloadbutton");e&&(mobile?e.style.display="none":(e.style.display="",e.setAttribute("href","https://yapms.org/downloadmap.php?f="+t)));t=document.getElementById("loading-animation");t&&(t.style.display="none");t=document.getElementById("screenshotimg");t&&(t.style.display="");t=document.getElementById("facebook-share");t&&(t.setAttribute("href","https://www.facebook.com/sharer.php?u="+a),t.setAttribute("target","_blank"));t=document.getElementById("twitter-share");t&&(t.setAttribute("href","https://twitter.com/intent/tweet?text="+a),t.setAttribute("target","_blank"));t=document.getElementById("reddit-share");t&&(t.setAttribute("href","https://www.reddit.com/submit?title=My%20YAPms%20Map&url="+a),t.setAttribute("target","_blank")),gtag("event",currentCache,{event_category:"Map Save",event_label:"Map save succeeded"})}).catch(e=>{console.log(e);e=document.getElementById("share-button");e&&e.setAttribute("onclick","share()"),gtag("event",currentCache,{event_category:"Map Save",event_label:"Map save failed"})})}}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function displayVersionInfo(){document.getElementById("versioninfo-text").innerHTML=currentCache}function displayShareMenu(){var e=document.getElementById("sharebuttons");e&&(e.style.display="none");e=document.getElementById("shareurl");e&&(e.style.display="none",e.innerHTML="");e=document.getElementById("screenshotimg");e&&(e.style.display="none");e=document.getElementById("loading-animation");e&&(e.style.display="")}function displayMenu(e){switch(LogoManager.loadFlags(),LogoManager.loadButtons(),closeAllPopups(),document.getElementById(e).style.display="flex",e){case"versionmenu":displayVersionInfo();break;case"sharemenu":displayShareMenu()}}function hideMenu(e){closeAllPopups(),document.getElementById(e).style.display="none"}const currentCache="v2.51.7";let states=[],lands=[],buttons=[],proportionalStates=[],paintIndex="Tossup",maxColorValue=2,mode="paint",maxColorValues=5,mapOptions={},strokeMultiplier=1,previousPalette=function(){toWinPalette()};function share(e){if(closeAllPopups(),"undefined"==typeof grecaptcha)return console.log("reCaptcha not detected"),void CookieManager.askConsent();console.log("reCaptcha detected"),displayMenu("sharemenu"),e?(MapManager.centerMap(),setTimeout(share_afterCenter,200)):share_afterCenter()}function share_afterCenter(){const e=document.getElementById("share-button");e&&(e.disabled=!0,e.style.opacity="0.5",setTimeout(function(){e.disabled=!1,e.style.opacity="1"},3e3)),html2canvas(document.getElementById("application"),{logging:!1,onclone:function(e){const a=e.getElementById("text");a&&(a.style.fontFamily="arial",a.style.fontSize="15px");const t=e.getElementById("svgdata");var n,o=e.getElementById("map-div");t&&o&&(n=o.offsetWidth+0*o.offsetWidth,o=o.offsetHeight+0*o.offsetHeight,t.setAttribute("width",n),t.setAttribute("height",o));const r=e.getElementById("legend-tooltip");r&&(r.style.display="none");var s=e.getElementsByClassName("legend-delete");for(let e=0,a=s.length;e<a;++e){const i=s[e];i&&(i.style.display="none")}const d=e.getElementById("legend-addcandidate-button");d&&(d.style.display="none")}}).then(function(e){notification.appendChild(e),e.style.width=0,e.style.height=0,e.style.display="none";const a=e.toDataURL("image/png");notification.removeChild(e);const t=document.getElementById("screenshotimg");t.src=a,t.style.width="40vw",t.style.height="auto",grecaptcha&&grecaptcha.execute("6LeDYbEUAAAAANfuJ4FxWVjoxPgDPsFGsdTLr1Jo",{action:"share"}).then(function(e){SaveMap.upload(a,e)})})}function setMode(e){console.log("mode "+mode+" | set "+e+" | mapType "+MapLoader.save_type+" | mapYear "+MapLoader.save_year),LogoManager.loadButtons(),mode=e;document.getElementById("modesbutton");for(var a,t=document.getElementsByClassName("mode-button"),n=0;n<t.length;++n)(a=t[n])&&(a.style.opacity="1");"paint"===e?(a=document.getElementById("modebutton-paint")).style.opacity="0.5":"ec"===e?(a=document.getElementById("modebutton-ec")).style.opacity="0.5":"delete"===e?(a=document.getElementById("modebutton-delete")).style.opacity="0.5":"fill"===e?(a=document.getElementById("modebutton-fill")).style.opacity="0.5":"highlight"===e&&((a=document.getElementById("modebutton-highlight")).style.opacity="0.5")}function verifyPaintIndex(){void 0===CandidateManager.candidates[paintIndex]&&(paintIndex="Tossup")}function countVotes(){const e=document.getElementById("battlechartmid");for(var a in e&&e.setAttribute("fill",CandidateManager.TOSSUP.colors[2]),CandidateManager.candidates){const t=CandidateManager.candidates[a];t.voteCount=0,t.probVoteCounts=[0,0,0,0];for(const n of states)void 0===n.delegates&&(n.delegates={}),void 0===n.delegates[a]&&(n.delegates[a]=0),t.voteCount+=n.delegates[a],"Tossup"===n.candidate&&"Tossup"!==a?t.probVoteCounts[0]+=n.delegates[a]:t.probVoteCounts[n.colorValue]+=n.delegates[a];for(const o of proportionalStates)void 0===o.delegates&&(o.delegates={}),void 0===o.delegates[a]&&(o.delegates[a]=0,"Tossup"===a&&(o.delegates[a]=o.voteCount)),t.voteCount+=o.delegates[a],"Tossup"===o.candidate&&"Tossup"!==a?t.probVoteCounts[0]+=o.delegates[a]:t.probVoteCounts[o.colorValue]+=o.delegates[a];e&&t.voteCount>Math.ceil(totalVotes/2)&&("Tossup"===a?e.setAttribute("fill",t.colors[2]):e.setAttribute("fill",t.colors[0]))}}function onResize(){var e,a;MapManager.centerMap(),"bottom"===ChartManager.chartPosition?(e=document.getElementById("chart-div"),(a=document.getElementById("chart")).style.height="auto",a.style.width=e.offsetHeight-5+"px"):(e=document.getElementById("chart-div"),(a=document.getElementById("chart")).style.height="auto",a.style.width="100%")}function setChangeCandidate(e,a){for(var t=0,n=states.length;t<n;++t){var o=states[t];o.candidate===e&&o.setColor(a,o.colorValue,{updateDelegates:!1}),o.delegates[a]=o.delegates[e],o.delegates[e]=void 0}}function forceUpdate(){"serviceWorker"in navigator&&navigator.serviceWorker.register("../sw.js").then(function(e){e.waiting&&(e.waiting.postMessage("skipwaiting"),gtag("event",currentCache,{event_category:"Manual Update",event_label:"Manual update from "+currentCache,non_interaction:!0}),setTimeout(function(){location.reload()},150))})}function updateArticles(){fetch("req_articles.php").then(e=>e.json()).then(e=>{var a=document.getElementById("yapnews-articles");if(null!==a)for(var t=0;t<e.length;++t){var n=document.createElement("div");n.setAttribute("class","yapnews-article");var o=document.createElement("a");o.setAttribute("class","yapnews-article-title"),o.setAttribute("href","https://www.yapms.com/news/article.php?a="+e[t].id),o.setAttribute("target","_blank");var r=document.createElement("div");r.setAttribute("class","yapnews-article-author");var s=document.createElement("div");s.setAttribute("class","yapnews-article-snippet"),o.innerHTML=e[t].title,r.innerHTML=e[t].author,s.innerHTML=e[t].snippet,n.appendChild(o),n.appendChild(r),n.appendChild(s),a.appendChild(n)}})}function updateMobile(){for(var e=document.getElementsByClassName("click-button"),a=0;a<e.length;++a)e[a].style.padding="7px";for(var t=document.getElementsByClassName("mode-button"),a=0;a<t.length;++a)t[a].style.paddingLeft="12px",t[a].style.paddingRight="12px";var n=document.getElementById("sidebar-toggle");n&&(n.style.display="none");n=document.getElementById("lockbutton");n&&(n.style.display="none")}function start(){if(CookieManager.loadCookies(),CookieManager.askConsent(),CandidateManager.initCandidates(),ChartManager.initChart(),ChartManager.setChart("horizontalbattle"),(mobile?updateMobile:updateArticles)(),!0===php_load_map){let e=null;e=!0===php_load_user?"https://yapms.org/users/"+php_load_user_id+"/"+php_load_map_id+".txt":"https://yapms.org/maps/"+php_load_map_id+".txt",MapLoader.loadMapFromURL(e),php_auto_reload&&window.setInterval(function(){MapLoader.loadMapFromURL(e)},3e4+Math.floor(3e4*Math.random()))}else!0===php_load_type_map?MapLoader.loadMapFromId(php_load_map_id):(PresetLoader.loadPreset("classic"),MapLoader.loadMap("./res/usa_presidential.svg",16,1,"usa_ec","presidential","open"));setTimeout(function(){LogoManager.loadButtons()},2500)}window.onerror=function(e,a,t,n,o){e.includes("a[b].target.className.indexOf")||e.includes("Script error.")||gtag("event",currentCache,{event_category:"Error",event_label:e+", "+a+", "+t+", "+currentCache,non_interaction:!0})},start(),"serviceWorker"in navigator?(console.log("Attempting to register service worker"),navigator.serviceWorker.register("../sw.js").then(function(e){console.log("SW: registered"),e.waiting&&(console.log("SW: update found"),(e=document.getElementById("update-button"))&&(e.style.display="inline"))},function(e){console.log("SW: register error ",e)})):console.log("No service worker detected");
